"use strict";var _createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var dbpromise=void 0,DBHelper=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"openDatabase",value:function(){return idb.open("restaurantDb",1,function(e){e.createObjectStore("restaurantDb",{keyPath:"id"})})}},{key:"saveDatabase",value:function(r){return n.openDatabase().then(function(e){if(e){var t=e.transaction("restaurantDb","readwrite"),n=t.objectStore("restaurantDb");return r.forEach(function(e){n.put(e)}),t.complete}})}},{key:"getCachedDb",value:function(){return(dbpromise=n.openDatabase()).then(function(e){if(e)return e.transaction("restaurantDb").objectStore("restaurantDb").getAll()})}},{key:"fromApi",value:function(){return fetch(n.DATABASE_URL).then(function(e){return e.json()}).then(function(e){return n.saveDatabase(e),e})}},{key:"fetchRestaurants",value:function(t){return n.getCachedDb().then(function(e){return e.length?Promise.resolve(e):n.fromApi()}).then(function(e){t(null,e)}).catch(function(e){t(e,null)})}},{key:"fetchRestaurantById",value:function(r,a){n.fetchRestaurants(function(e,t){if(e)a(e,null);else{var n=t.find(function(e){return e.id==r});n?a(null,n):a("Restaurant does not exist",null)}})}},{key:"fetchRestaurantByCuisine",value:function(r,a){n.fetchRestaurants(function(e,t){if(e)a(e,null);else{var n=t.filter(function(e){return e.cuisine_type==r});a(null,n)}})}},{key:"fetchRestaurantByNeighborhood",value:function(r,a){n.fetchRestaurants(function(e,t){if(e)a(e,null);else{var n=t.filter(function(e){return e.neighborhood==r});a(null,n)}})}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(r,a,i){n.fetchRestaurants(function(e,t){if(e)i(e,null);else{var n=t;"all"!=r&&(n=n.filter(function(e){return e.cuisine_type==r})),"all"!=a&&(n=n.filter(function(e){return e.neighborhood==a})),i(null,n)}})}},{key:"fetchNeighborhoods",value:function(a){n.fetchRestaurants(function(e,n){if(e)a(e,null);else{var r=n.map(function(e,t){return n[t].neighborhood}),t=r.filter(function(e,t){return r.indexOf(e)==t});a(null,t)}})}},{key:"fetchCuisines",value:function(a){n.fetchRestaurants(function(e,n){if(e)a(e,null);else{var r=n.map(function(e,t){return n[t].cuisine_type}),t=r.filter(function(e,t){return r.indexOf(e)==t});a(null,t)}})}},{key:"urlForRestaurant",value:function(e){return"./restaurant.html?id="+e.id}},{key:"imageUrlForRestaurant",value:function(e){return"/dist/img/"+e.photograph+".jpg"}},{key:"mapMarkerForRestaurant",value:function(e,t){return new google.maps.Marker({position:e.latlng,title:e.name,url:n.urlForRestaurant(e),map:t,animation:google.maps.Animation.DROP})}},{key:"DATABASE_URL",get:function(){return"http://localhost:1337/restaurants"}}]),n}(),restaurants=void 0,neighborhoods=void 0,cuisines=void 0,markers=[];document.addEventListener("DOMContentLoaded",function(){fetchNeighborhoods(),fetchCuisines()}),fetchNeighborhoods=function(){DBHelper.fetchNeighborhoods(function(e,t){null!=e?console.error(e):(self.neighborhoods=t,fillNeighborhoodsHTML())})},fillNeighborhoodsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,n=document.getElementById("neighborhoods-select");e.forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,t.setAttribute("aria-label",e),t.setAttribute("role","option"),n.append(t)})},fetchCuisines=function(){DBHelper.fetchCuisines(function(e,t){e?console.error(e):(self.cuisines=t,fillCuisinesHTML())})},fillCuisinesHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.cuisines,n=document.getElementById("cuisines-select");e.forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,t.setAttribute("aria-label",e),t.setAttribute("role","option"),n.append(t)})},window.initMap=function(){self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),updateRestaurants()},updateRestaurants=function(){var e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),n=e.selectedIndex,r=t.selectedIndex,a=e[n].value,i=t[r].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(a,i,function(e,t){e?console.error(e):(resetRestaurants(t),fillRestaurantsHTML())})},resetRestaurants=function(e){self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers.forEach(function(e){return e.setMap(null)}),self.markers=[],self.restaurants=e},fillRestaurantsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants,t=document.getElementById("restaurants-list");e.forEach(function(e){t.append(createRestaurantHTML(e))}),addMarkersToMap()},createRestaurantHTML=function(e){var t=document.createElement("li");t.setAttribute("role","listitem"),t.setAttribute("tabindex","0");var n=document.createElement("img");n.className="restaurant-img",n.setAttribute("role","img"),n.src=DBHelper.imageUrlForRestaurant(e);var r=document.createElement("h2");r.innerHTML=e.name,n.setAttribute("aria-label",r.innerHTML+" restaurant"),n.setAttribute("alt",r.innerHTML+" restaurant"),t.append(n),t.append(r);var a=document.createElement("p");a.innerHTML=e.neighborhood,t.append(a);var i=document.createElement("p");i.innerHTML=e.address,t.append(i);var s=document.createElement("a");return s.innerHTML="View Details",s.setAttribute("role","link"),s.href=DBHelper.urlForRestaurant(e),t.append(s),t},addMarkersToMap=function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants).forEach(function(e){var t=DBHelper.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(t,"click",function(){window.location.href=t.url}),self.markers.push(t)})};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t,a,n,r,i,s,o,u=navigator.userAgent;e.HTMLPictureElement&&/ecko/.test(u)&&u.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",(a=document.createElement("source"),n=function(e){var t,n,r=e.parentNode;"PICTURE"===r.nodeName.toUpperCase()?(t=a.cloneNode(),r.insertBefore(t,r.firstElementChild),setTimeout(function(){r.removeChild(t)})):(!e._pfLastSize||e.offsetWidth>e._pfLastSize)&&(e._pfLastSize=e.offsetWidth,n=e.sizes,e.sizes+=",100vw",setTimeout(function(){e.sizes=n}))},r=function(){var e,t=document.querySelectorAll("picture > img, img[srcset][sizes]");for(e=0;e<t.length;e++)n(t[e])},i=function(){clearTimeout(t),t=setTimeout(r,99)},s=e.matchMedia&&matchMedia("(orientation: landscape)"),o=function(){i(),s&&s.addListener&&s.addListener(i)},a.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?o():document.addEventListener("DOMContentLoaded",o),i))}(window),function(e,i,c){function l(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function M(e,t){return e.res-t.res}function T(e,t){var n,r,a;if(e&&t)for(a=H.parseSet(t),e=H.makeUrl(e),n=0;n<a.length;n++)if(e===H.makeUrl(a[n].url)){r=a[n];break}return r}i.createElement("picture");var a,f,u,r,s,n,o,d,m,p,t,h,g,v,A,b,y,w,E,R,L,C,H={},S=!1,B=function(){},x=i.createElement("img"),k=x.getAttribute,D=x.setAttribute,I=x.removeAttribute,z=i.documentElement,N={},P={algorithm:""},U="data-pfsrc",F=U+"set",_=navigator.userAgent,$=/rident/.test(_)||/ecko/.test(_)&&_.match(/rv\:(\d+)/)&&35<RegExp.$1,O="currentSrc",W=/\s+\+?\d+(e\d+)?w/,j=/(\([^)]+\))?\s*(.+)/,Q=e.picturefillCFG,G="font-size:100%!important;",q=!0,V={},K={},J=e.devicePixelRatio,X={px:1,in:96},Y=i.createElement("a"),Z=!1,ee=/^[ \t\n\r\u000c]+/,te=/^[, \t\n\r\u000c]+/,ne=/^[^ \t\n\r\u000c]+/,re=/[,]+$/,ae=/^\d+$/,ie=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,se=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},oe=function(t){var n={};return function(e){return e in n||(n[e]=t(e)),n[e]}},ue=(r=/^([\d\.]+)(em|vw|px)$/,s=oe(function(e){return"return "+function(){for(var e=arguments,t=0,n=e[0];++t in e;)n=n.replace(e[t],e[++t]);return n}((e||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"}),function(e,t){var n;if(!(e in V))if(V[e]=!1,t&&(n=e.match(r)))V[e]=n[1]*X[n[2]];else try{V[e]=new Function("e",s(e))(X)}catch(e){}return V[e]}),ce=function(e,t){return e.w?(e.cWidth=H.calcListLength(t||"100vw"),e.res=e.w/e.cWidth):e.res=e.d,e},le=function(e){if(S){var t,n,r,a=e||{};if(a.elements&&1===a.elements.nodeType&&("IMG"===a.elements.nodeName.toUpperCase()?a.elements=[a.elements]:(a.context=a.elements,a.elements=null)),r=(t=a.elements||H.qsa(a.context||i,a.reevaluate||a.reselect?H.sel:H.selShort)).length){for(H.setupRun(a),Z=!0,n=0;n<r;n++)H.fillImg(t[n],a);H.teardownRun(a)}}};e.console&&console.warn,O in x||(O="src"),N["image/jpeg"]=!0,N["image/gif"]=!0,N["image/png"]=!0,N["image/svg+xml"]=i.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),H.ns=("pf"+(new Date).getTime()).substr(0,9),H.supSrcset="srcset"in x,H.supSizes="sizes"in x,H.supPicture=!!e.HTMLPictureElement,H.supSrcset&&H.supPicture&&!H.supSizes&&(E=i.createElement("img"),x.srcset="data:,a",E.src="data:,a",H.supSrcset=x.complete===E.complete,H.supPicture=H.supSrcset&&H.supPicture),H.supSrcset&&!H.supSizes?(b="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",y=i.createElement("img"),w=function(){2===y.width&&(H.supSizes=!0),f=H.supSrcset&&!H.supSizes,S=!0,setTimeout(le)},y.onload=w,y.onerror=w,y.setAttribute("sizes","9px"),y.srcset=b+" 1w,data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw== 9w",y.src=b):S=!0,H.selShort="picture>img,img[srcset]",H.sel=H.selShort,H.cfg=P,H.DPR=J||1,H.u=X,H.types=N,H.setSize=B,H.makeUrl=oe(function(e){return Y.href=e,Y.href}),H.qsa=function(e,t){return"querySelector"in e?e.querySelectorAll(t):[]},H.matchesMedia=function(){return e.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?H.matchesMedia=function(e){return!e||matchMedia(e).matches}:H.matchesMedia=H.mMQ,H.matchesMedia.apply(this,arguments)},H.mMQ=function(e){return!e||ue(e)},H.calcLength=function(e){var t=ue(e,!0)||!1;return t<0&&(t=!1),t},H.supportsType=function(e){return!e||N[e]},H.parseSize=oe(function(e){var t=(e||"").match(j);return{media:t&&t[1],length:t&&t[2]}}),H.parseSet=function(e){return e.cands||(e.cands=function(r,f){function e(e){var t,n=e.exec(r.substring(u));return n?(t=n[0],u+=t.length,t):void 0}function t(){var e,t,n,r,a,i,s,o,u,c=!1,l={};for(r=0;r<m.length;r++)i=(a=m[r])[a.length-1],s=a.substring(0,a.length-1),o=parseInt(s,10),u=parseFloat(s),ae.test(s)&&"w"===i?((e||t)&&(c=!0),0===o?c=!0:e=o):ie.test(s)&&"x"===i?((e||t||n)&&(c=!0),u<0?c=!0:t=u):ae.test(s)&&"h"===i?((n||t)&&(c=!0),0===o?c=!0:n=o):c=!0;c||(l.url=d,e&&(l.w=e),t&&(l.d=t),n&&(l.h=n),n||t||e||(l.d=1),1===l.d&&(f.has1x=!0),l.set=f,p.push(l))}function n(){for(e(ee),a="",i="in descriptor";;){if(s=r.charAt(u),"in descriptor"===i)if(l(s))a&&(m.push(a),a="",i="after descriptor");else{if(","===s)return u+=1,a&&m.push(a),void t();if("("===s)a+=s,i="in parens";else{if(""===s)return a&&m.push(a),void t();a+=s}}else if("in parens"===i)if(")"===s)a+=s,i="in descriptor";else{if(""===s)return m.push(a),void t();a+=s}else if("after descriptor"===i)if(l(s));else{if(""===s)return void t();i="in descriptor",u-=1}u+=1}}for(var d,m,a,i,s,o=r.length,u=0,p=[];;){if(e(te),o<=u)return p;d=e(ne),m=[],","===d.slice(-1)?(d=d.replace(re,""),t()):n()}}(e.srcset,e)),e.cands},H.getEmValue=function(){var e;if(!a&&(e=i.body)){var t=i.createElement("div"),n=z.style.cssText,r=e.style.cssText;t.style.cssText="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",z.style.cssText=G,e.style.cssText=G,e.appendChild(t),a=t.offsetWidth,e.removeChild(t),a=parseFloat(a,10),z.style.cssText=n,e.style.cssText=r}return a||16},H.calcListLength=function(e){if(!(e in K)||P.uT){var t=H.calcLength(function(e){var t,n,r,a,i,s,o,u=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,c=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(r=(n=function(e){function t(){a&&(i.push(a),a="")}function n(){i[0]&&(s.push(i),i=[])}for(var r,a="",i=[],s=[],o=0,u=0,c=!1;;){if(""===(r=e.charAt(u)))return t(),n(),s;if(c){if("*"===r&&"/"===e[u+1]){c=!1,u+=2,t();continue}u+=1}else{if(l(r)){if(e.charAt(u-1)&&l(e.charAt(u-1))||!a){u+=1;continue}if(0===o){t(),u+=1;continue}r=" "}else if("("===r)o+=1;else if(")"===r)o-=1;else{if(","===r){t(),n(),u+=1;continue}if("/"===r&&"*"===e.charAt(u+1)){c=!0,u+=2;continue}}a+=r,u+=1}}}(e)).length,t=0;t<r;t++)if(i=(a=n[t])[a.length-1],o=i,u.test(o)&&0<=parseFloat(o)||c.test(o)||"0"===o||"-0"===o||"+0"===o){if(s=i,a.pop(),0===a.length)return s;if(a=a.join(" "),H.matchesMedia(a))return s}return"100vw"}(e));K[e]=t||X.width}return K[e]},H.setRes=function(e){var t;if(e)for(var n=0,r=(t=H.parseSet(e)).length;n<r;n++)ce(t[n],e.sizes);return t},H.setRes.res=ce,H.applySetCandidate=function(e,t){if(e.length){var n,r,a,i,s,o,u,c,l,f=t[H.ns],d=H.DPR;if(o=f.curSrc||t[O],(u=f.curCan||(y=t,w=o,!(E=e[0].set)&&w&&(E=(E=y[H.ns].sets)&&E[E.length-1]),(R=T(w,E))&&(w=H.makeUrl(w),y[H.ns].curSrc=w,(y[H.ns].curCan=R).res||ce(R,R.set.sizes)),R))&&u.set===e[0].set&&((l=$&&!t.complete&&u.res-.1>d)||(u.cached=!0,u.res>=d&&(s=u))),!s)for(e.sort(M),s=e[(i=e.length)-1],r=0;r<i;r++)if((n=e[r]).res>=d){s=e[a=r-1]&&(l||o!==H.makeUrl(n.url))&&(m=e[a].res,p=n.res,h=d,g=e[a].cached,b=A=v=void 0,"saveData"===P.algorithm?2.7<m?b=h+1:(A=(p-h)*(v=Math.pow(m-.6,1.5)),g&&(A+=.1*v),b=m+A):b=1<h?Math.sqrt(m*p):m,h<b)?e[a]:n;break}s&&(c=H.makeUrl(s.url),f.curSrc=c,f.curCan=s,c!==o&&H.setSrc(t,s),H.setSize(t))}var m,p,h,g,v,A,b,y,w,E,R},H.setSrc=function(e,t){var n;e.src=t.url,"image/svg+xml"===t.set.type&&(n=e.style.width,e.style.width=e.offsetWidth+1+"px",e.offsetWidth+1&&(e.style.width=n))},H.getSet=function(e){var t,n,r,a=!1,i=e[H.ns].sets;for(t=0;t<i.length&&!a;t++)if((n=i[t]).srcset&&H.matchesMedia(n.media)&&(r=H.supportsType(n.type))){"pending"===r&&(n=r),a=n;break}return a},H.parseSets=function(e,t,n){var r,a,i,s,o=t&&"PICTURE"===t.nodeName.toUpperCase(),u=e[H.ns];(u.src===c||n.src)&&(u.src=k.call(e,"src"),u.src?D.call(e,U,u.src):I.call(e,U)),(u.srcset===c||n.srcset||!H.supSrcset||e.srcset)&&(r=k.call(e,"srcset"),u.srcset=r,s=!0),u.sets=[],o&&(u.pic=!0,function(e,t){var n,r,a,i,s=e.getElementsByTagName("source");for(n=0,r=s.length;n<r;n++)(a=s[n])[H.ns]=!0,(i=a.getAttribute("srcset"))&&t.push({srcset:i,media:a.getAttribute("media"),type:a.getAttribute("type"),sizes:a.getAttribute("sizes")})}(t,u.sets)),u.srcset?(a={srcset:u.srcset,sizes:k.call(e,"sizes")},u.sets.push(a),(i=(f||u.src)&&W.test(u.srcset||""))||!u.src||T(u.src,a)||a.has1x||(a.srcset+=", "+u.src,a.cands.push({url:u.src,d:1,set:a}))):u.src&&u.sets.push({srcset:u.src,sizes:null}),u.curCan=null,u.curSrc=c,u.supported=!(o||a&&!H.supSrcset||i&&!H.supSizes),s&&H.supSrcset&&!u.supported&&(r?(D.call(e,F,r),e.srcset=""):I.call(e,F)),u.supported&&!u.srcset&&(!u.src&&e.src||e.src!==H.makeUrl(u.src))&&(null===u.src?e.removeAttribute("src"):e.src=u.src),u.parsed=!0},H.fillImg=function(e,t){var n,r,a,i,s,o=t.reselect||t.reevaluate;e[H.ns]||(e[H.ns]={}),n=e[H.ns],(o||n.evaled!==u)&&((!n.parsed||t.reevaluate)&&H.parseSets(e,e.parentNode,t),n.supported?n.evaled=u:(r=e,i=H.getSet(r),s=!1,"pending"!==i&&(s=u,i&&(a=H.setRes(i),H.applySetCandidate(a,r))),r[H.ns].evaled=s))},H.setupRun=function(){(!Z||q||J!==e.devicePixelRatio)&&(q=!1,J=e.devicePixelRatio,V={},K={},H.DPR=J||1,X.width=Math.max(e.innerWidth||0,z.clientWidth),X.height=Math.max(e.innerHeight||0,z.clientHeight),X.vw=X.width/100,X.vh=X.height/100,u=[X.height,X.width,J].join("-"),X.em=H.getEmValue(),X.rem=X.em)},H.supPicture?(le=B,H.fillImg=B):(h=e.attachEvent?/d$|^c/:/d$|^c|^i/,g=function e(){var t=i.readyState||"";v=setTimeout(e,"loading"===t?200:999),i.body&&(H.fillImgs(),(n=n||h.test(t))&&clearTimeout(v))},v=setTimeout(g,i.body?9:99),A=z.clientHeight,se(e,"resize",(o=function(){q=Math.max(e.innerWidth||0,z.clientWidth)!==X.width||z.clientHeight!==A,A=z.clientHeight,q&&H.fillImgs()},d=99,t=function e(){var t=new Date-p;t<d?m=setTimeout(e,d-t):(m=null,o())},function(){p=new Date,m||(m=setTimeout(t,d))})),se(i,"readystatechange",g)),H.picturefill=le,H.fillImgs=le,H.teardownRun=B,le._=H,e.picturefillCFG={pf:H,push:function(e){var t=e.shift();"function"==typeof H[t]?H[t].apply(H,e):(P[t]=e[0],Z&&H.fillImgs({reselect:!0}))}};for(;Q&&Q.length;)e.picturefillCFG.push(Q.shift());e.picturefill=le,"object"==("undefined"==typeof module?"undefined":_typeof(module))&&"object"==_typeof(module.exports)?module.exports=le:"function"==typeof define&&define.amd&&define("picturefill",function(){return le}),H.supPicture||(N["image/webp"]=(R="image/webp",L="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",(C=new e.Image).onerror=function(){N[R]=!1,le()},C.onload=function(){N[R]=1===C.width,le()},C.src=L,"pending"))}(window,document);var restaurant=void 0,map=void 0;window.initMap=function(){fetchRestaurantFromURL(function(e,t){e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),document.getElementById("map").setAttribute("role","application"),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})},fetchRestaurantFromURL=function(n){if(self.restaurant)n(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,t){(self.restaurant=t)?(fillRestaurantHTML(),n(null,t)):console.error(e)}):(error="No restaurant id in URL",n(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("restaurant-name");t.innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var n=document.getElementById("restaurant-img");n.className="restaurant-img",n.setAttribute("aria-label",t.innerHTML+" restaurant"),n.setAttribute("alt",t.innerHTML+" restaurant"),n.src=DBHelper.imageUrlForRestaurant(e),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var r=document.createElement("tr"),a=document.createElement("td");a.innerHTML=n,a.style.color="#525252",r.appendChild(a);var i=document.createElement("td");i.innerHTML=e[n],i.style.color="#525252",r.appendChild(i),t.appendChild(r)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container"),n=document.createElement("h2");if(n.innerHTML="Reviews",t.appendChild(n),!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void t.appendChild(r)}var a=document.getElementById("reviews-list");e.forEach(function(e){a.appendChild(createReviewHTML(e))}),t.appendChild(a)},createReviewHTML=function(e){var t=document.createElement("li"),n=document.createElement("div");n.className="review-header",t.appendChild(n);var r=document.createElement("h4");r.innerHTML=e.name,r.className="review-author",r.setAttribute("role","header"),r.setAttribute("tabindex","0"),n.appendChild(r);var a=document.createElement("span");a.innerHTML=e.date,a.className="review-date",a.setAttribute("tabindex","0"),n.appendChild(a);var i=document.createElement("div");i.className="review-content",t.appendChild(i);var s=document.createElement("div");s.innerHTML="Rating: "+e.rating,s.className="rating",s.setAttribute("tabindex","0"),i.appendChild(s);var o=document.createElement("p");return o.innerHTML=e.comments,o.setAttribute("tabindex","0"),i.appendChild(o),t},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},function(){var e=Cache.prototype.addAll,t=navigator.userAgent.match(/(Firefox|Chrome)\/(\d+\.)/);if(t)var n=t[1],r=parseInt(t[2]);e&&(!t||"Firefox"===n&&46<=r||"Chrome"===n&&50<=r)||(Cache.prototype.addAll=function(n){var r=this;function a(e){this.name="NetworkError",this.code=19,this.message=e}return a.prototype=Object.create(Error.prototype),Promise.resolve().then(function(){if(arguments.length<1)throw new TypeError;return n=n.map(function(e){return e instanceof Request?e:String(e)}),Promise.all(n.map(function(e){"string"==typeof e&&(e=new Request(e));var t=new URL(e.url).protocol;if("http:"!==t&&"https:"!==t)throw new a("Invalid scheme");return fetch(e.clone())}))}).then(function(e){if(e.some(function(e){return!e.ok}))throw new a("Incorrect response status");return Promise.all(e.map(function(e,t){return r.put(n[t],e)}))}).then(function(){})},Cache.prototype.add=function(e){return this.addAll([e])})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiaGVscGVyLmpzIiwibWFpbi5qcyIsInBpY3R1cmVmaWxsLm1pbi5qcyIsInJlc3RhdXJhbnRfaW5mby5qcyIsInNlcnZpY2V3b3JrZXItY2FjaGUtcG9seWZpbGwuanMiXSwibmFtZXMiOlsiZGJwcm9taXNlIiwiREJIZWxwZXIiLCJpZGIiLCJvcGVuIiwidXBncmFkZURiIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJrZXlQYXRoIiwiZGF0YSIsIm9wZW5EYXRhYmFzZSIsInRoZW4iLCJkYiIsInR4IiwidHJhbnNhY3Rpb24iLCJzdG9yZSIsIm9iamVjdFN0b3JlIiwiZm9yRWFjaCIsInJlc3RhdXJhbnQiLCJwdXQiLCJjb21wbGV0ZSIsImdldEFsbCIsImZldGNoIiwiREFUQUJBU0VfVVJMIiwicmVzcG9uc2UiLCJqc29uIiwicmVzdGF1cmFudHMiLCJzYXZlRGF0YWJhc2UiLCJjYWxsYmFjayIsImdldENhY2hlZERiIiwibGVuZ3RoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJmcm9tQXBpIiwiY2F0Y2giLCJlciIsImlkIiwiZmV0Y2hSZXN0YXVyYW50cyIsImVycm9yIiwiZmluZCIsInIiLCJjdWlzaW5lIiwicmVzdWx0cyIsImZpbHRlciIsImN1aXNpbmVfdHlwZSIsIm5laWdoYm9yaG9vZCIsIm5laWdoYm9yaG9vZHMiLCJtYXAiLCJ2IiwiaSIsInVuaXF1ZU5laWdoYm9yaG9vZHMiLCJpbmRleE9mIiwiY3Vpc2luZXMiLCJ1bmlxdWVDdWlzaW5lcyIsInBob3RvZ3JhcGgiLCJnb29nbGUiLCJtYXBzIiwiTWFya2VyIiwicG9zaXRpb24iLCJsYXRsbmciLCJ0aXRsZSIsIm5hbWUiLCJ1cmwiLCJ1cmxGb3JSZXN0YXVyYW50IiwiYW5pbWF0aW9uIiwiQW5pbWF0aW9uIiwiRFJPUCIsIm1hcmtlcnMiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJmZXRjaE5laWdoYm9yaG9vZHMiLCJmZXRjaEN1aXNpbmVzIiwiY29uc29sZSIsInNlbGYiLCJmaWxsTmVpZ2hib3Job29kc0hUTUwiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJzZWxlY3QiLCJnZXRFbGVtZW50QnlJZCIsIm9wdGlvbiIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJ2YWx1ZSIsInNldEF0dHJpYnV0ZSIsImFwcGVuZCIsImZpbGxDdWlzaW5lc0hUTUwiLCJ3aW5kb3ciLCJpbml0TWFwIiwiTWFwIiwiem9vbSIsImNlbnRlciIsImxhdCIsImxuZyIsInNjcm9sbHdoZWVsIiwidXBkYXRlUmVzdGF1cmFudHMiLCJjU2VsZWN0IiwiblNlbGVjdCIsImNJbmRleCIsInNlbGVjdGVkSW5kZXgiLCJuSW5kZXgiLCJmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QiLCJyZXNldFJlc3RhdXJhbnRzIiwiZmlsbFJlc3RhdXJhbnRzSFRNTCIsIm0iLCJzZXRNYXAiLCJ1bCIsImNyZWF0ZVJlc3RhdXJhbnRIVE1MIiwiYWRkTWFya2Vyc1RvTWFwIiwibGkiLCJpbWFnZSIsImNsYXNzTmFtZSIsInNyYyIsImltYWdlVXJsRm9yUmVzdGF1cmFudCIsImFkZHJlc3MiLCJtb3JlIiwiaHJlZiIsIm1hcmtlciIsIm1hcE1hcmtlckZvclJlc3RhdXJhbnQiLCJldmVudCIsImFkZExpc3RlbmVyIiwibG9jYXRpb24iLCJwdXNoIiwiYSIsImIiLCJjIiwiZCIsImUiLCJmIiwiZyIsImgiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJIVE1MUGljdHVyZUVsZW1lbnQiLCJ0ZXN0IiwibWF0Y2giLCJSZWdFeHAiLCIkMSIsInBhcmVudE5vZGUiLCJub2RlTmFtZSIsInRvVXBwZXJDYXNlIiwiY2xvbmVOb2RlIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJzZXRUaW1lb3V0IiwicmVtb3ZlQ2hpbGQiLCJfcGZMYXN0U2l6ZSIsIm9mZnNldFdpZHRoIiwic2l6ZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2xlYXJUaW1lb3V0IiwibWF0Y2hNZWRpYSIsInNyY3NldCIsInJlYWR5U3RhdGUiLCJyZXMiLCJrIiwicyIsInBhcnNlU2V0IiwibWFrZVVybCIsInAiLCJxIiwidCIsInUiLCJ3IiwiZ2V0QXR0cmlidXRlIiwieCIsInkiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ6IiwiZG9jdW1lbnRFbGVtZW50IiwiQSIsIkIiLCJhbGdvcml0aG0iLCJDIiwiRCIsIkUiLCJGIiwiRyIsIkgiLCJJIiwiSiIsInBpY3R1cmVmaWxsQ0ZHIiwiTCIsIk0iLCJOIiwiTyIsIlAiLCJkZXZpY2VQaXhlbFJhdGlvIiwiUSIsInB4IiwiaW4iLCJSIiwiUyIsIlQiLCJVIiwiViIsIlciLCJYIiwiWSIsIloiLCJhdHRhY2hFdmVudCIsIiQiLCJfIiwicmVwbGFjZSIsInRvTG93ZXJDYXNlIiwiRnVuY3Rpb24iLCJhYSIsImNXaWR0aCIsImNhbGNMaXN0TGVuZ3RoIiwiYmEiLCJlbGVtZW50cyIsIm5vZGVUeXBlIiwiY29udGV4dCIsInFzYSIsInJlZXZhbHVhdGUiLCJyZXNlbGVjdCIsInNlbCIsInNlbFNob3J0Iiwic2V0dXBSdW4iLCJmaWxsSW1nIiwidGVhcmRvd25SdW4iLCJ3YXJuIiwiaW1wbGVtZW50YXRpb24iLCJoYXNGZWF0dXJlIiwibnMiLCJEYXRlIiwiZ2V0VGltZSIsInN1YnN0ciIsInN1cFNyY3NldCIsInN1cFNpemVzIiwic3VwUGljdHVyZSIsIndpZHRoIiwib25sb2FkIiwib25lcnJvciIsImNmZyIsIkRQUiIsInR5cGVzIiwic2V0U2l6ZSIsIm1hdGNoZXNNZWRpYSIsIm1hdGNoZXMiLCJtTVEiLCJhcHBseSIsInRoaXMiLCJjYWxjTGVuZ3RoIiwic3VwcG9ydHNUeXBlIiwicGFyc2VTaXplIiwibWVkaWEiLCJjYW5kcyIsImV4ZWMiLCJzdWJzdHJpbmciLCJqIiwibCIsIm8iLCJwYXJzZUludCIsInBhcnNlRmxvYXQiLCJoYXMxeCIsInNldCIsIm4iLCJjaGFyQXQiLCJzbGljZSIsImdldEVtVmFsdWUiLCJib2R5Iiwic3R5bGUiLCJjc3NUZXh0IiwiYXBwZW5kQ2hpbGQiLCJ1VCIsInBvcCIsImpvaW4iLCJzZXRSZXMiLCJhcHBseVNldENhbmRpZGF0ZSIsImN1clNyYyIsImN1ckNhbiIsInNldHMiLCJjYWNoZWQiLCJzb3J0IiwiTWF0aCIsInBvdyIsInNxcnQiLCJzZXRTcmMiLCJ0eXBlIiwiZ2V0U2V0IiwicGFyc2VTZXRzIiwiY2FsbCIsInBpYyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic3VwcG9ydGVkIiwicGFyc2VkIiwiZXZhbGVkIiwibWF4IiwiaW5uZXJXaWR0aCIsImNsaWVudFdpZHRoIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJ2dyIsInZoIiwiZW0iLCJyZW0iLCJmaWxsSW1ncyIsInBpY3R1cmVmaWxsIiwicGYiLCJzaGlmdCIsIm1vZHVsZSIsIl90eXBlb2YiLCJleHBvcnRzIiwiZGVmaW5lIiwiYW1kIiwiSW1hZ2UiLCJmZXRjaFJlc3RhdXJhbnRGcm9tVVJMIiwiZmlsbEJyZWFkY3J1bWIiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJmZXRjaFJlc3RhdXJhbnRCeUlkIiwiZmlsbFJlc3RhdXJhbnRIVE1MIiwib3BlcmF0aW5nX2hvdXJzIiwiZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwiLCJmaWxsUmV2aWV3c0hUTUwiLCJvcGVyYXRpbmdIb3VycyIsImhvdXJzIiwia2V5Iiwicm93IiwiZGF5IiwiY29sb3IiLCJ0aW1lIiwicmV2aWV3cyIsImNvbnRhaW5lciIsIm5vUmV2aWV3cyIsInJldmlldyIsImNyZWF0ZVJldmlld0hUTUwiLCJyZXZpZXdIZWFkZXIiLCJkYXRlIiwicmV2aWV3Q29udGVudCIsInJhdGluZyIsImNvbW1lbnRzIiwiYnJlYWRjcnVtYiIsImRlY29kZVVSSUNvbXBvbmVudCIsIm5hdGl2ZUFkZEFsbCIsIkNhY2hlIiwicHJvdG90eXBlIiwiYWRkQWxsIiwiYWdlbnQiLCJ2ZXJzaW9uIiwicmVxdWVzdHMiLCJjYWNoZSIsIk5ldHdvcmtFcnJvciIsIm1lc3NhZ2UiLCJjb2RlIiwiT2JqZWN0IiwiY3JlYXRlIiwiRXJyb3IiLCJUeXBlRXJyb3IiLCJyZXF1ZXN0IiwiUmVxdWVzdCIsIlN0cmluZyIsImFsbCIsInNjaGVtZSIsIlVSTCIsInByb3RvY29sIiwiY2xvbmUiLCJyZXNwb25zZXMiLCJzb21lIiwib2siLCJhZGQiXSwibWFwcGluZ3MiOiI2WEFpQkEsSUFBSUEsZUFBQUEsRUFDRUMsMEhBdUJGLE9BQU9DLElBQUlDLEtBQUssZUFBZ0IsRUFBRyxTQUFTQyxHQUMxQ0EsRUFBVUMsa0JBQWtCLGVBQWdCLENBQzFDQyxRQUFTLDhDQU9LQyxHQUNsQixPQUFPTixFQUFTTyxlQUFlQyxLQUFLLFNBQVNDLEdBQzNDLEdBQUtBLEVBQUwsQ0FDQSxJQUFJQyxFQUFLRCxFQUFHRSxZQUFZLGVBQWdCLGFBQ3BDQyxFQUFRRixFQUFHRyxZQUFZLGdCQUkzQixPQUhBUCxFQUFLUSxRQUFRLFNBQVNDLEdBQ3BCSCxFQUFNSSxJQUFJRCxLQUVMTCxFQUFHTyxrREFTWixPQURBbEIsVUFBWUMsRUFBU08sZ0JBQ0pDLEtBQUssU0FBU0MsR0FDN0IsR0FBS0EsRUFHTCxPQUZTQSxFQUFHRSxZQUFZLGdCQUNURSxZQUFZLGdCQUNkSyw2Q0FLZixPQUFPQyxNQUFNbkIsRUFBU29CLGNBQ25CWixLQUFLLFNBQVNhLEdBQ2IsT0FBT0EsRUFBU0MsU0FDZmQsS0FBSyxTQUFDZSxHQUVQLE9BREF2QixFQUFTd0IsYUFBYUQsR0FDZkEsNkNBUVdFLEdBNkJ0QixPQUFPekIsRUFBUzBCLGNBQWNsQixLQUFLLFNBQUNlLEdBQ2xDLE9BQUlBLEVBQVlJLE9BQ1BDLFFBQVFDLFFBQVFOLEdBRWhCdkIsRUFBUzhCLFlBRWpCdEIsS0FBSyxTQUFDZSxHQUNMRSxFQUFTLEtBQU1GLEtBRWhCUSxNQUFNLFNBQUNDLEdBQ05QLEVBQVNPLEVBQUksb0RBU1FDLEVBQUlSLEdBRTdCekIsRUFBU2tDLGlCQUFpQixTQUFDQyxFQUFPWixHQUNoQyxHQUFJWSxFQUNGVixFQUFTVSxFQUFPLFVBQ1gsQ0FDTCxJQUFNcEIsRUFBYVEsRUFB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LElBQU0sU0FBYVgsR0FDakMsT0FBTzVHLEtBQUtnRyxPQUFPLENBQUNZLE1BbkZ2QiIsImZpbGUiOiJhbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQgXCJyZXF1aXJlLWpzZG9jXCI6IFtcImVycm9yXCIsIHtcbiAgICBcInJlcXVpcmVcIjoge1xuICAgICAgICBcIkZ1bmN0aW9uRGVjbGFyYXRpb25cIjogdHJ1ZSxcbiAgICAgICAgXCJNZXRob2REZWZpbml0aW9uXCI6IGZhbHNlLFxuICAgICAgICBcIkNsYXNzRGVjbGFyYXRpb25cIjogZmFsc2UsXG4gICAgICAgIFwiQXJyb3dGdW5jdGlvbkV4cHJlc3Npb25cIjogZmFsc2UsXG4gICAgICAgIFwiRnVuY3Rpb25FeHByZXNzaW9uXCI6IGZhbHNlXG4gICAgfVxufV0qL1xuLyogZXNsaW50IHZhbGlkLWpzZG9jOiBcImVycm9yXCIqL1xuLyogZXNsaW50IG1heC1sZW46IFtcImVycm9yXCIsIHsgXCJjb2RlXCI6IDEwMCB9XSovXG4vKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IFtcImVycm9yXCIsIHsgXCJ2YXJzXCI6IFwibG9jYWxcIiB9XSovXG4vLyBpbXBvcnQgaWRiIGZyb20gXCJpZGJcIjtcblxuLyoqXG4gKiBDb21tb24gZGF0YWJhc2UgaGVscGVyIGZ1bmN0aW9ucy5cbiAqL1xubGV0IGRicHJvbWlzZTtcbmNsYXNzIERCSGVscGVyIHtcbiAgLyoqXG4gICAqIERhdGFiYXNlIFVSTC5cbiAgICogQ2hhbmdlIHRoaXMgdG8gcmVzdGF1cmFudHMuanNvbiBmaWxlIGxvY2F0aW9uIG9uIHlvdXIgc2VydmVyLlxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRBQkFTRV9VUkwoKSB7XG4gICAgLyoqXG4gICAgKiBjb25zdCBwb3J0ID0gODAwMCAvLyBDaGFuZ2UgdGhpcyB0byB5b3VyIHNlcnZlciBwb3J0XG4gICAgKiByZXR1cm4gYGh0dHA6Ly9sb2NhbGhvc3Q6JHtwb3J0fS9kYXRhL3Jlc3RhdXJhbnRzLmpzb25gO1xuICAgICovXG4gICAgY29uc3QgcG9ydCA9IDEzMzc7IC8vIENoYW5nZSB0aGlzIHRvIHlvdXIgc2VydmVyIHBvcnRcbiAgICByZXR1cm4gYGh0dHA6Ly9sb2NhbGhvc3Q6JHtwb3J0fS9yZXN0YXVyYW50c2A7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIERhdGFiYXNlXG4gICAqL1xuXG4gIHN0YXRpYyBvcGVuRGF0YWJhc2UoKSB7XG4gICAgLy8gaWYgKCFuYXZpZ2F0b3Iuc2VydmljZVdvcmtlcil7XG4gICAgLy8gIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAvLyB9XG5cbiAgICByZXR1cm4gaWRiLm9wZW4oJ3Jlc3RhdXJhbnREYicsIDEsIGZ1bmN0aW9uKHVwZ3JhZGVEYikge1xuICAgICAgdXBncmFkZURiLmNyZWF0ZU9iamVjdFN0b3JlKCdyZXN0YXVyYW50RGInLCB7XG4gICAgICAgIGtleVBhdGg6ICdpZCd9KTtcbiAgICAgIC8vIHN0b3JlLmNyZWF0ZUluZGV4KCdieS1pZCcsJ2lkJyk7XG4gICAgfSk7XG4gIH1cbiAgLypcbiAgKlNhdmluZyBvbiBkYXRhYmFzZVxuICAqL1xuICBzdGF0aWMgc2F2ZURhdGFiYXNlKGRhdGEpIHtcbiAgICByZXR1cm4gREJIZWxwZXIub3BlbkRhdGFiYXNlKCkudGhlbihmdW5jdGlvbihkYikge1xuICAgICAgaWYgKCFkYikgcmV0dXJuO1xuICAgICAgbGV0IHR4ID0gZGIudHJhbnNhY3Rpb24oJ3Jlc3RhdXJhbnREYicsICdyZWFkd3JpdGUnKTtcbiAgICAgIGxldCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKCdyZXN0YXVyYW50RGInKTtcbiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbihyZXN0YXVyYW50KSB7XG4gICAgICAgIHN0b3JlLnB1dChyZXN0YXVyYW50KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHR4LmNvbXBsZXRlO1xuICAgIH0pO1xuICB9XG5cbiAgLypcbiAgKkdldHRpbmcgZGF0YSBmcm9tIERCXG4gICovXG4gIHN0YXRpYyBnZXRDYWNoZWREYigpIHtcbiAgICBkYnByb21pc2UgPSBEQkhlbHBlci5vcGVuRGF0YWJhc2UoKTtcbiAgICByZXR1cm4gZGJwcm9taXNlLnRoZW4oZnVuY3Rpb24oZGIpIHtcbiAgICAgIGlmICghZGIpIHJldHVybjtcbiAgICAgIGxldCB0eCA9IGRiLnRyYW5zYWN0aW9uKCdyZXN0YXVyYW50RGInKTtcbiAgICAgIGxldCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKCdyZXN0YXVyYW50RGInKTtcbiAgICAgIHJldHVybiBzdG9yZS5nZXRBbGwoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tQXBpKCkge1xuICAgIHJldHVybiBmZXRjaChEQkhlbHBlci5EQVRBQkFTRV9VUkwpXG4gICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgfSkudGhlbigocmVzdGF1cmFudHMpID0+IHtcbiAgICAgICAgREJIZWxwZXIuc2F2ZURhdGFiYXNlKHJlc3RhdXJhbnRzKTtcbiAgICAgICAgcmV0dXJuIHJlc3RhdXJhbnRzO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggYWxsIHJlc3RhdXJhbnRzLlxuICAgKi9cblxuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50cyhjYWxsYmFjaykge1xuICAgIC8qKiBzdGFnZTFcbiAgICAqbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICp4aHIub3BlbignR0VUJywgREJIZWxwZXIuREFUQUJBU0VfVVJMKTtcbiAgICAqeGhyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAqICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7IC8vIEdvdCBhIHN1Y2Nlc3MgcmVzcG9uc2UgZnJvbSBzZXJ2ZXIhXG4gICAgKiAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAqICAgIGNvbnN0IHJlc3RhdXJhbnRzID0ganNvbi5yZXN0YXVyYW50cztcbiAgICAqICAgIGNhbGxiYWNrKG51bGwsIHJlc3RhdXJhbnRzKTtcbiAgICAqICB9IGVsc2UgeyAvLyBPb3BzIS4gR290IGFuIGVycm9yIGZyb20gc2VydmVyLlxuICAgICogICAgY29uc3QgZXJyb3IgPSAoYFJlcXVlc3QgZmFpbGVkLiBSZXR1cm5lZCBzdGF0dXMgb2YgJHt4aHIuc3RhdHVzfWApO1xuICAgICogICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgICogIH1cbiAgICAqfTtcbiAgICAqeGhyLnNlbmQoKTtcbiAgICAqKi9cblxuICAgLyoqIFRlc3RpbmcgZmV0Y2ggZnJvbSBkdW1teSBzZXJ2ZXJcbiAgICAqZmV0Y2goREJIZWxwZXIuREFUQUJBU0VfVVJMKVxuICAgICogIC50aGVuKHJlc3BvbmQgPT4ge1xuICAgICogICAgaWYgKCFyZXNwb25kLm9rKXtcbiAgICAqICAgICAgdGhyb3cgXCJVbmFibGUgdG8gZmV0Y2ggZnJvbSBzZXJ2ZXIhXCI7XG4gICAgKiAgICB9XG4gICAgKiAgICByZXR1cm4gcmVzcG9uZC5qc29uKCk7XG4gICAgKiAgfSlcbiAgICAqICAudGhlbihyZXN0YXVyYW50cyA9PiBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50cykpXG4gICAgKiAgLmNhdGNoKGUgPT4gY2FsbGJhY2soZSxudWxsKSlcbiAgICAqKi9cblxuICAgIHJldHVybiBEQkhlbHBlci5nZXRDYWNoZWREYigpLnRoZW4oKHJlc3RhdXJhbnRzKSA9PiB7XG4gICAgICBpZiAocmVzdGF1cmFudHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdGF1cmFudHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIERCSGVscGVyLmZyb21BcGkoKTtcbiAgICAgIH1cbiAgICB9KS50aGVuKChyZXN0YXVyYW50cykgPT4ge1xuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50cyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcikgPT4ge1xuICAgICAgICBjYWxsYmFjayhlciwgbnVsbCk7XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAvKipcbiAgICogRmV0Y2ggYSByZXN0YXVyYW50IGJ5IGl0cyBJRC5cbiAgICovXG5cbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5SWQoaWQsIGNhbGxiYWNrKSB7XG4gICAgLy8gZmV0Y2ggYWxsIHJlc3RhdXJhbnRzIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHJlc3RhdXJhbnQgPSByZXN0YXVyYW50cy5maW5kKChyKSA9PiByLmlkID09IGlkKTtcbiAgICAgICAgaWYgKHJlc3RhdXJhbnQpIHsgLy8gR290IHRoZSByZXN0YXVyYW50XG4gICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdGF1cmFudCk7XG4gICAgICAgIH0gZWxzZSB7IC8vIFJlc3RhdXJhbnQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGRhdGFiYXNlXG4gICAgICAgICAgY2FsbGJhY2soJ1Jlc3RhdXJhbnQgZG9lcyBub3QgZXhpc3QnLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIHJlc3RhdXJhbnRzIGJ5IGEgY3Vpc2luZSB0eXBlIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxuICAgKi9cblxuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lKGN1aXNpbmUsIGNhbGxiYWNrKSB7XG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzICB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZ1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpbHRlciByZXN0YXVyYW50cyB0byBoYXZlIG9ubHkgZ2l2ZW4gY3Vpc2luZSB0eXBlXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSByZXN0YXVyYW50cy5maWx0ZXIoKHIpID0+IHIuY3Vpc2luZV90eXBlID09IGN1aXNpbmUpO1xuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHRzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCByZXN0YXVyYW50cyBieSBhIG5laWdoYm9yaG9vZCB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cbiAgICovXG5cbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5TmVpZ2hib3Job29kKG5laWdoYm9yaG9vZCwgY2FsbGJhY2spIHtcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGaWx0ZXIgcmVzdGF1cmFudHMgdG8gaGF2ZSBvbmx5IGdpdmVuIG5laWdoYm9yaG9vZFxuICAgICAgICBjb25zdCByZXN1bHRzID0gcmVzdGF1cmFudHMuZmlsdGVyKChyKSA9PiByLm5laWdoYm9yaG9vZCA9PSBuZWlnaGJvcmhvb2QpO1xuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHRzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCByZXN0YXVyYW50cyBieSBhIGN1aXNpbmUgYW5kIGEgbmVpZ2hib3Job29kIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxuICAgKi9cblxuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kKGN1aXNpbmUsIG5laWdoYm9yaG9vZCwgY2FsbGJhY2spIHtcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgcmVzdWx0cyA9IHJlc3RhdXJhbnRzO1xuICAgICAgICBpZiAoY3Vpc2luZSAhPSAnYWxsJykgeyAvLyBmaWx0ZXIgYnkgY3Vpc2luZVxuICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcigocikgPT4gci5jdWlzaW5lX3R5cGUgPT0gY3Vpc2luZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5laWdoYm9yaG9vZCAhPSAnYWxsJykgeyAvLyBmaWx0ZXIgYnkgbmVpZ2hib3Job29kXG4gICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKChyKSA9PiByLm5laWdoYm9yaG9vZCA9PSBuZWlnaGJvcmhvb2QpO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdHMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGFsbCBuZWlnaGJvcmhvb2RzIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxuICAgKi9cblxuICBzdGF0aWMgZmV0Y2hOZWlnaGJvcmhvb2RzKGNhbGxiYWNrKSB7XG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gR2V0IGFsbCBuZWlnaGJvcmhvb2RzIGZyb20gYWxsIHJlc3RhdXJhbnRzXG4gICAgICAgIGNvbnN0IG5laWdoYm9yaG9vZHMgPSByZXN0YXVyYW50cy5tYXAoKHYsIGkpID0+IHJlc3RhdXJhbnRzW2ldLm5laWdoYm9yaG9vZCk7XG4gICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gbmVpZ2hib3Job29kc1xuICAgICAgICBjb25zdCB1bmlxdWVOZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kcy5maWx0ZXIoKHYsIGkpID0+IG5laWdoYm9yaG9vZHMuaW5kZXhPZih2KSA9PSBpKTtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgdW5pcXVlTmVpZ2hib3Job29kcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggYWxsIGN1aXNpbmVzIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxuICAgKi9cblxuICBzdGF0aWMgZmV0Y2hDdWlzaW5lcyhjYWxsYmFjaykge1xuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEdldCBhbGwgY3Vpc2luZXMgZnJvbSBhbGwgcmVzdGF1cmFudHNcbiAgICAgICAgY29uc3QgY3Vpc2luZXMgPSByZXN0YXVyYW50cy5tYXAoKHYsIGkpID0+IHJlc3RhdXJhbnRzW2ldLmN1aXNpbmVfdHlwZSk7XG4gICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gY3Vpc2luZXNcbiAgICAgICAgY29uc3QgdW5pcXVlQ3Vpc2luZXMgPSBjdWlzaW5lcy5maWx0ZXIoKHYsIGkpID0+IGN1aXNpbmVzLmluZGV4T2YodikgPT0gaSk7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHVuaXF1ZUN1aXNpbmVzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0YXVyYW50IHBhZ2UgVVJMLlxuICAgKi9cblxuICBzdGF0aWMgdXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSB7XG4gICAgcmV0dXJuIChgLi9yZXN0YXVyYW50Lmh0bWw/aWQ9JHtyZXN0YXVyYW50LmlkfWApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc3RhdXJhbnQgaW1hZ2UgVVJMLlxuICAgKi9cblxuICBzdGF0aWMgaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpIHtcbiAgICAvLyByZXR1cm4gKGAvaW1nLyR7cmVzdGF1cmFudC5waG90b2dyYXBofWBcbiAgICByZXR1cm4gKGAvZGlzdC9pbWcvJHtyZXN0YXVyYW50LnBob3RvZ3JhcGh9LmpwZ2ApO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcCBtYXJrZXIgZm9yIGEgcmVzdGF1cmFudC5cbiAgICovXG5cbiAgc3RhdGljIG1hcE1hcmtlckZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgbWFwKSB7XG4gICAgY29uc3QgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICBwb3NpdGlvbjogcmVzdGF1cmFudC5sYXRsbmcsXG4gICAgICB0aXRsZTogcmVzdGF1cmFudC5uYW1lLFxuICAgICAgdXJsOiBEQkhlbHBlci51cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpLFxuICAgICAgbWFwOiBtYXAsXG4gICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QfVxuICAgICk7XG4gICAgcmV0dXJuIG1hcmtlcjtcbiAgfVxufVxuIiwiLyogZXNsaW50IG1heC1sZW46IFtcImVycm9yXCIsIHsgXCJjb2RlXCI6IDEwMCB9XSovXG4vKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IFtcImVycm9yXCIsIHsgXCJ2YXJzXCI6IFwibG9jYWxcIiB9XSovXG5cbmxldCByZXN0YXVyYW50cztcbmxldCBuZWlnaGJvcmhvb2RzO1xubGV0IGN1aXNpbmVzO1xudmFyIG1hcDtcbnZhciBtYXJrZXJzID0gW107XG5cbi8qKlxuICogRmV0Y2ggbmVpZ2hib3Job29kcyBhbmQgY3Vpc2luZXMgYXMgc29vbiBhcyB0aGUgcGFnZSBpcyBsb2FkZWQuXG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gIGZldGNoTmVpZ2hib3Job29kcygpO1xuICBmZXRjaEN1aXNpbmVzKCk7XG59KTtcblxuLyoqXG4gKiBGZXRjaCBhbGwgbmVpZ2hib3Job29kcyBhbmQgc2V0IHRoZWlyIEhUTUwuXG4gKi9cbmZldGNoTmVpZ2hib3Job29kcyA9ICgpID0+IHtcbiAgREJIZWxwZXIuZmV0Y2hOZWlnaGJvcmhvb2RzKChlcnJvciwgbmVpZ2hib3Job29kcykgPT4ge1xuICAgIGlmIChlcnJvciAhPSBudWxsKSB7IC8vIEdvdCBhbiBlcnJvclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYubmVpZ2hib3Job29kcyA9IG5laWdoYm9yaG9vZHM7XG4gICAgICBmaWxsTmVpZ2hib3Job29kc0hUTUwoKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLyoqXG4gKiBTZXQgbmVpZ2hib3Job29kcyBIVE1MLlxuICovXG5cbmZpbGxOZWlnaGJvcmhvb2RzSFRNTCA9IChuZWlnaGJvcmhvb2RzID0gc2VsZi5uZWlnaGJvcmhvb2RzKSA9PiB7XG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpO1xuICBuZWlnaGJvcmhvb2RzLmZvckVhY2goKG5laWdoYm9yaG9vZCkgPT4ge1xuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgIG9wdGlvbi5pbm5lckhUTUwgPSBuZWlnaGJvcmhvb2Q7XG4gICAgb3B0aW9uLnZhbHVlID0gbmVpZ2hib3Job29kO1xuICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBuZWlnaGJvcmhvb2QpO1xuICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnb3B0aW9uJyk7XG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb24pO1xuICAgIC8vIHNlbGVjdFswXS5zZXRBdHRyaWJ1dGUoJ2xhYmVsJyxzZWxlY3RbMF0uaW5uZXJIVE1MKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIEZldGNoIGFsbCBjdWlzaW5lcyBhbmQgc2V0IHRoZWlyIEhUTUwuXG4gKi9cblxuZmV0Y2hDdWlzaW5lcyA9ICgpID0+IHtcbiAgREJIZWxwZXIuZmV0Y2hDdWlzaW5lcygoZXJyb3IsIGN1aXNpbmVzKSA9PiB7XG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLmN1aXNpbmVzID0gY3Vpc2luZXM7XG4gICAgICBmaWxsQ3Vpc2luZXNIVE1MKCk7XG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICogU2V0IGN1aXNpbmVzIEhUTUwuXG4gKi9cblxuZmlsbEN1aXNpbmVzSFRNTCA9IChjdWlzaW5lcyA9IHNlbGYuY3Vpc2luZXMpID0+IHtcbiAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1aXNpbmVzLXNlbGVjdCcpO1xuXG4gIGN1aXNpbmVzLmZvckVhY2goKGN1aXNpbmUpID0+IHtcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gY3Vpc2luZTtcbiAgICBvcHRpb24udmFsdWUgPSBjdWlzaW5lO1xuICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBjdWlzaW5lKTtcbiAgICBvcHRpb24uc2V0QXR0cmlidXRlKCdyb2xlJywgJ29wdGlvbicpO1xuICAgIHNlbGVjdC5hcHBlbmQob3B0aW9uKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIEluaXRpYWxpemUgR29vZ2xlIG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cbiAqL1xuXG53aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcbiAgbGV0IGxvYyA9IHtcbiAgICBsYXQ6IDQwLjcyMjIxNixcbiAgICBsbmc6IC03My45ODc1MDEsXG4gIH07XG5cbiAgc2VsZi5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xuICAgIHpvb206IDEyLFxuICAgIGNlbnRlcjogbG9jLFxuICAgIHNjcm9sbHdoZWVsOiBmYWxzZSxcbiAgfSk7XG5cbiAgdXBkYXRlUmVzdGF1cmFudHMoKTtcbn07XG5cbi8qKlxuICogVXBkYXRlIHBhZ2UgYW5kIG1hcCBmb3IgY3VycmVudCByZXN0YXVyYW50cy5cbiAqL1xuXG51cGRhdGVSZXN0YXVyYW50cyA9ICgpID0+IHtcbiAgY29uc3QgY1NlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdWlzaW5lcy1zZWxlY3QnKTtcbiAgY29uc3QgblNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpO1xuXG4gIGNvbnN0IGNJbmRleCA9IGNTZWxlY3Quc2VsZWN0ZWRJbmRleDtcbiAgY29uc3QgbkluZGV4ID0gblNlbGVjdC5zZWxlY3RlZEluZGV4O1xuXG4gIGNvbnN0IGN1aXNpbmUgPSBjU2VsZWN0W2NJbmRleF0udmFsdWU7XG5cbiAgLy8gY1NlbGVjdFswXS5zZXRBdHRyaWJ1dGUoJ2xhYmVsJyxjU2VsZWN0WzBdLmlubmVySFRNTCk7XG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IG5TZWxlY3RbbkluZGV4XS52YWx1ZTtcblxuICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QoY3Vpc2luZSwgbmVpZ2hib3Job29kLCAoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNldFJlc3RhdXJhbnRzKHJlc3RhdXJhbnRzKTtcbiAgICAgIGZpbGxSZXN0YXVyYW50c0hUTUwoKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLyoqXG4gKiBDbGVhciBjdXJyZW50IHJlc3RhdXJhbnRzLCB0aGVpciBIVE1MIGFuZCByZW1vdmUgdGhlaXIgbWFwIG1hcmtlcnMuXG4gKi9cblxucmVzZXRSZXN0YXVyYW50cyA9IChyZXN0YXVyYW50cykgPT4ge1xuICAvLyBSZW1vdmUgYWxsIHJlc3RhdXJhbnRzXG4gIHNlbGYucmVzdGF1cmFudHMgPSBbXTtcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xuICB1bC5pbm5lckhUTUwgPSAnJztcblxuICAvLyBSZW1vdmUgYWxsIG1hcCBtYXJrZXJzXG4gIHNlbGYubWFya2Vycy5mb3JFYWNoKChtKSA9PiBtLnNldE1hcChudWxsKSk7XG4gIHNlbGYubWFya2VycyA9IFtdO1xuICBzZWxmLnJlc3RhdXJhbnRzID0gcmVzdGF1cmFudHM7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhbGwgcmVzdGF1cmFudHMgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXG4gKi9cblxuZmlsbFJlc3RhdXJhbnRzSFRNTCA9IChyZXN0YXVyYW50cyA9IHNlbGYucmVzdGF1cmFudHMpID0+IHtcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xuICByZXN0YXVyYW50cy5mb3JFYWNoKChyZXN0YXVyYW50KSA9PiB7XG4gICAgdWwuYXBwZW5kKGNyZWF0ZVJlc3RhdXJhbnRIVE1MKHJlc3RhdXJhbnQpKTtcbiAgfSk7XG4gIGFkZE1hcmtlcnNUb01hcCgpO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MLlxuICovXG5cbmNyZWF0ZVJlc3RhdXJhbnRIVE1MID0gKHJlc3RhdXJhbnQpID0+IHtcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICBsaS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnbGlzdGl0ZW0nKTtcbiAgbGkuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG5cbiAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJztcbiAgaW1hZ2Uuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2ltZycpO1xuICBpbWFnZS5zcmMgPSBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XG5cbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gIG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xuICAvKiB1bmlxdWUgYWx0IGZvciB0aGUgaW1hZ2UgKi9cbiAgaW1hZ2Uuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbmFtZS5pbm5lckhUTUwrJyByZXN0YXVyYW50Jyk7XG4gIGltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgbmFtZS5pbm5lckhUTUwrJyByZXN0YXVyYW50Jyk7XG5cbiAgbGkuYXBwZW5kKGltYWdlKTtcbiAgbGkuYXBwZW5kKG5hbWUpO1xuXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgbmVpZ2hib3Job29kLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmVpZ2hib3Job29kO1xuICBsaS5hcHBlbmQobmVpZ2hib3Job29kKTtcblxuICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICBhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzcztcbiAgbGkuYXBwZW5kKGFkZHJlc3MpO1xuXG4gIGNvbnN0IG1vcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gIG1vcmUuaW5uZXJIVE1MID0gJ1ZpZXcgRGV0YWlscyc7XG4gIG1vcmUuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2xpbmsnKTtcblxuICBtb3JlLmhyZWYgPSBEQkhlbHBlci51cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xuICBsaS5hcHBlbmQobW9yZSk7XG5cbiAgcmV0dXJuIGxpO1xufTtcblxuLyoqXG4gKiBBZGQgbWFya2VycyBmb3IgY3VycmVudCByZXN0YXVyYW50cyB0byB0aGUgbWFwLlxuICovXG5cbmFkZE1hcmtlcnNUb01hcCA9IChyZXN0YXVyYW50cyA9IHNlbGYucmVzdGF1cmFudHMpID0+IHtcbiAgcmVzdGF1cmFudHMuZm9yRWFjaCgocmVzdGF1cmFudCkgPT4ge1xuICAgIC8vIEFkZCBtYXJrZXIgdG8gdGhlIG1hcFxuICAgIGNvbnN0IG1hcmtlciA9IERCSGVscGVyLm1hcE1hcmtlckZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgc2VsZi5tYXApO1xuICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBtYXJrZXIudXJsO1xuICAgIH0pO1xuICAgIHNlbGYubWFya2Vycy5wdXNoKG1hcmtlcik7XG4gIH0pO1xufTtcbiIsIi8qISBwaWN0dXJlZmlsbCAtIHYzLjAuMiAtIDIwMTYtMDItMTJcbiAqIGh0dHBzOi8vc2NvdHRqZWhsLmdpdGh1Yi5pby9waWN0dXJlZmlsbC9cbiAqIENvcHlyaWdodCAoYykgMjAxNiBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRqZWhsL3BpY3R1cmVmaWxsL2Jsb2IvbWFzdGVyL0F1dGhvcnMudHh0OyBMaWNlbnNlZCBNSVRcbiAqL1xuIWZ1bmN0aW9uKGEpe3ZhciBiPW5hdmlnYXRvci51c2VyQWdlbnQ7YS5IVE1MUGljdHVyZUVsZW1lbnQmJi9lY2tvLy50ZXN0KGIpJiZiLm1hdGNoKC9ydlxcOihcXGQrKS8pJiZSZWdFeHAuJDE8NDUmJmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIixmdW5jdGlvbigpe3ZhciBiLGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNvdXJjZVwiKSxkPWZ1bmN0aW9uKGEpe3ZhciBiLGQsZT1hLnBhcmVudE5vZGU7XCJQSUNUVVJFXCI9PT1lLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk/KGI9Yy5jbG9uZU5vZGUoKSxlLmluc2VydEJlZm9yZShiLGUuZmlyc3RFbGVtZW50Q2hpbGQpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLnJlbW92ZUNoaWxkKGIpfSkpOighYS5fcGZMYXN0U2l6ZXx8YS5vZmZzZXRXaWR0aD5hLl9wZkxhc3RTaXplKSYmKGEuX3BmTGFzdFNpemU9YS5vZmZzZXRXaWR0aCxkPWEuc2l6ZXMsYS5zaXplcys9XCIsMTAwdndcIixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5zaXplcz1kfSkpfSxlPWZ1bmN0aW9uKCl7dmFyIGEsYj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwicGljdHVyZSA+IGltZywgaW1nW3NyY3NldF1bc2l6ZXNdXCIpO2ZvcihhPTA7YTxiLmxlbmd0aDthKyspZChiW2FdKX0sZj1mdW5jdGlvbigpe2NsZWFyVGltZW91dChiKSxiPXNldFRpbWVvdXQoZSw5OSl9LGc9YS5tYXRjaE1lZGlhJiZtYXRjaE1lZGlhKFwiKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpXCIpLGg9ZnVuY3Rpb24oKXtmKCksZyYmZy5hZGRMaXN0ZW5lciYmZy5hZGRMaXN0ZW5lcihmKX07cmV0dXJuIGMuc3Jjc2V0PVwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFBQUFBQ0g1QkFFS0FBRUFMQUFBQUFBQkFBRUFBQUlDVEFFQU93PT1cIiwvXltjfGldfGQkLy50ZXN0KGRvY3VtZW50LnJlYWR5U3RhdGV8fFwiXCIpP2goKTpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLGgpLGZ9KCkpfSh3aW5kb3cpLGZ1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe3JldHVyblwiIFwiPT09YXx8XCJcdFwiPT09YXx8XCJcXG5cIj09PWF8fFwiXFxmXCI9PT1hfHxcIlxcclwiPT09YX1mdW5jdGlvbiBlKGIsYyl7dmFyIGQ9bmV3IGEuSW1hZ2U7cmV0dXJuIGQub25lcnJvcj1mdW5jdGlvbigpe0FbYl09ITEsYmEoKX0sZC5vbmxvYWQ9ZnVuY3Rpb24oKXtBW2JdPTE9PT1kLndpZHRoLGJhKCl9LGQuc3JjPWMsXCJwZW5kaW5nXCJ9ZnVuY3Rpb24gZigpe009ITEsUD1hLmRldmljZVBpeGVsUmF0aW8sTj17fSxPPXt9LHMuRFBSPVB8fDEsUS53aWR0aD1NYXRoLm1heChhLmlubmVyV2lkdGh8fDAsei5jbGllbnRXaWR0aCksUS5oZWlnaHQ9TWF0aC5tYXgoYS5pbm5lckhlaWdodHx8MCx6LmNsaWVudEhlaWdodCksUS52dz1RLndpZHRoLzEwMCxRLnZoPVEuaGVpZ2h0LzEwMCxyPVtRLmhlaWdodCxRLndpZHRoLFBdLmpvaW4oXCItXCIpLFEuZW09cy5nZXRFbVZhbHVlKCksUS5yZW09US5lbX1mdW5jdGlvbiBnKGEsYixjLGQpe3ZhciBlLGYsZyxoO3JldHVyblwic2F2ZURhdGFcIj09PUIuYWxnb3JpdGhtP2E+Mi43P2g9YysxOihmPWItYyxlPU1hdGgucG93KGEtLjYsMS41KSxnPWYqZSxkJiYoZys9LjEqZSksaD1hK2cpOmg9Yz4xP01hdGguc3FydChhKmIpOmEsaD5jfWZ1bmN0aW9uIGgoYSl7dmFyIGIsYz1zLmdldFNldChhKSxkPSExO1wicGVuZGluZ1wiIT09YyYmKGQ9cixjJiYoYj1zLnNldFJlcyhjKSxzLmFwcGx5U2V0Q2FuZGlkYXRlKGIsYSkpKSxhW3MubnNdLmV2YWxlZD1kfWZ1bmN0aW9uIGkoYSxiKXtyZXR1cm4gYS5yZXMtYi5yZXN9ZnVuY3Rpb24gaihhLGIsYyl7dmFyIGQ7cmV0dXJuIWMmJmImJihjPWFbcy5uc10uc2V0cyxjPWMmJmNbYy5sZW5ndGgtMV0pLGQ9ayhiLGMpLGQmJihiPXMubWFrZVVybChiKSxhW3MubnNdLmN1clNyYz1iLGFbcy5uc10uY3VyQ2FuPWQsZC5yZXN8fGFhKGQsZC5zZXQuc2l6ZXMpKSxkfWZ1bmN0aW9uIGsoYSxiKXt2YXIgYyxkLGU7aWYoYSYmYilmb3IoZT1zLnBhcnNlU2V0KGIpLGE9cy5tYWtlVXJsKGEpLGM9MDtjPGUubGVuZ3RoO2MrKylpZihhPT09cy5tYWtlVXJsKGVbY10udXJsKSl7ZD1lW2NdO2JyZWFrfXJldHVybiBkfWZ1bmN0aW9uIGwoYSxiKXt2YXIgYyxkLGUsZixnPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzb3VyY2VcIik7Zm9yKGM9MCxkPWcubGVuZ3RoO2Q+YztjKyspZT1nW2NdLGVbcy5uc109ITAsZj1lLmdldEF0dHJpYnV0ZShcInNyY3NldFwiKSxmJiZiLnB1c2goe3NyY3NldDpmLG1lZGlhOmUuZ2V0QXR0cmlidXRlKFwibWVkaWFcIiksdHlwZTplLmdldEF0dHJpYnV0ZShcInR5cGVcIiksc2l6ZXM6ZS5nZXRBdHRyaWJ1dGUoXCJzaXplc1wiKX0pfWZ1bmN0aW9uIG0oYSxiKXtmdW5jdGlvbiBjKGIpe3ZhciBjLGQ9Yi5leGVjKGEuc3Vic3RyaW5nKG0pKTtyZXR1cm4gZD8oYz1kWzBdLG0rPWMubGVuZ3RoLGMpOnZvaWQgMH1mdW5jdGlvbiBlKCl7dmFyIGEsYyxkLGUsZixpLGosayxsLG09ITEsbz17fTtmb3IoZT0wO2U8aC5sZW5ndGg7ZSsrKWY9aFtlXSxpPWZbZi5sZW5ndGgtMV0saj1mLnN1YnN0cmluZygwLGYubGVuZ3RoLTEpLGs9cGFyc2VJbnQoaiwxMCksbD1wYXJzZUZsb2F0KGopLFgudGVzdChqKSYmXCJ3XCI9PT1pPygoYXx8YykmJihtPSEwKSwwPT09az9tPSEwOmE9ayk6WS50ZXN0KGopJiZcInhcIj09PWk/KChhfHxjfHxkKSYmKG09ITApLDA+bD9tPSEwOmM9bCk6WC50ZXN0KGopJiZcImhcIj09PWk/KChkfHxjKSYmKG09ITApLDA9PT1rP209ITA6ZD1rKTptPSEwO218fChvLnVybD1nLGEmJihvLnc9YSksYyYmKG8uZD1jKSxkJiYoby5oPWQpLGR8fGN8fGF8fChvLmQ9MSksMT09PW8uZCYmKGIuaGFzMXg9ITApLG8uc2V0PWIsbi5wdXNoKG8pKX1mdW5jdGlvbiBmKCl7Zm9yKGMoVCksaT1cIlwiLGo9XCJpbiBkZXNjcmlwdG9yXCI7Oyl7aWYoaz1hLmNoYXJBdChtKSxcImluIGRlc2NyaXB0b3JcIj09PWopaWYoZChrKSlpJiYoaC5wdXNoKGkpLGk9XCJcIixqPVwiYWZ0ZXIgZGVzY3JpcHRvclwiKTtlbHNle2lmKFwiLFwiPT09aylyZXR1cm4gbSs9MSxpJiZoLnB1c2goaSksdm9pZCBlKCk7aWYoXCIoXCI9PT1rKWkrPWssaj1cImluIHBhcmVuc1wiO2Vsc2V7aWYoXCJcIj09PWspcmV0dXJuIGkmJmgucHVzaChpKSx2b2lkIGUoKTtpKz1rfX1lbHNlIGlmKFwiaW4gcGFyZW5zXCI9PT1qKWlmKFwiKVwiPT09aylpKz1rLGo9XCJpbiBkZXNjcmlwdG9yXCI7ZWxzZXtpZihcIlwiPT09aylyZXR1cm4gaC5wdXNoKGkpLHZvaWQgZSgpO2krPWt9ZWxzZSBpZihcImFmdGVyIGRlc2NyaXB0b3JcIj09PWopaWYoZChrKSk7ZWxzZXtpZihcIlwiPT09aylyZXR1cm4gdm9pZCBlKCk7aj1cImluIGRlc2NyaXB0b3JcIixtLT0xfW0rPTF9fWZvcih2YXIgZyxoLGksaixrLGw9YS5sZW5ndGgsbT0wLG49W107Oyl7aWYoYyhVKSxtPj1sKXJldHVybiBuO2c9YyhWKSxoPVtdLFwiLFwiPT09Zy5zbGljZSgtMSk/KGc9Zy5yZXBsYWNlKFcsXCJcIiksZSgpKTpmKCl9fWZ1bmN0aW9uIG4oYSl7ZnVuY3Rpb24gYihhKXtmdW5jdGlvbiBiKCl7ZiYmKGcucHVzaChmKSxmPVwiXCIpfWZ1bmN0aW9uIGMoKXtnWzBdJiYoaC5wdXNoKGcpLGc9W10pfWZvcih2YXIgZSxmPVwiXCIsZz1bXSxoPVtdLGk9MCxqPTAsaz0hMTs7KXtpZihlPWEuY2hhckF0KGopLFwiXCI9PT1lKXJldHVybiBiKCksYygpLGg7aWYoayl7aWYoXCIqXCI9PT1lJiZcIi9cIj09PWFbaisxXSl7az0hMSxqKz0yLGIoKTtjb250aW51ZX1qKz0xfWVsc2V7aWYoZChlKSl7aWYoYS5jaGFyQXQoai0xKSYmZChhLmNoYXJBdChqLTEpKXx8IWYpe2orPTE7Y29udGludWV9aWYoMD09PWkpe2IoKSxqKz0xO2NvbnRpbnVlfWU9XCIgXCJ9ZWxzZSBpZihcIihcIj09PWUpaSs9MTtlbHNlIGlmKFwiKVwiPT09ZSlpLT0xO2Vsc2V7aWYoXCIsXCI9PT1lKXtiKCksYygpLGorPTE7Y29udGludWV9aWYoXCIvXCI9PT1lJiZcIipcIj09PWEuY2hhckF0KGorMSkpe2s9ITAsais9Mjtjb250aW51ZX19Zis9ZSxqKz0xfX19ZnVuY3Rpb24gYyhhKXtyZXR1cm4gay50ZXN0KGEpJiZwYXJzZUZsb2F0KGEpPj0wPyEwOmwudGVzdChhKT8hMDpcIjBcIj09PWF8fFwiLTBcIj09PWF8fFwiKzBcIj09PWE/ITA6ITF9dmFyIGUsZixnLGgsaSxqLGs9L14oPzpbKy1dP1swLTldK3xbMC05XSpcXC5bMC05XSspKD86W2VFXVsrLV0/WzAtOV0rKT8oPzpjaHxjbXxlbXxleHxpbnxtbXxwY3xwdHxweHxyZW18dmh8dm1pbnx2bWF4fHZ3KSQvaSxsPS9eY2FsY1xcKCg/OlswLTlhLXogXFwuXFwrXFwtXFwqXFwvXFwoXFwpXSspXFwpJC9pO2ZvcihmPWIoYSksZz1mLmxlbmd0aCxlPTA7Zz5lO2UrKylpZihoPWZbZV0saT1oW2gubGVuZ3RoLTFdLGMoaSkpe2lmKGo9aSxoLnBvcCgpLDA9PT1oLmxlbmd0aClyZXR1cm4gajtpZihoPWguam9pbihcIiBcIikscy5tYXRjaGVzTWVkaWEoaCkpcmV0dXJuIGp9cmV0dXJuXCIxMDB2d1wifWIuY3JlYXRlRWxlbWVudChcInBpY3R1cmVcIik7dmFyIG8scCxxLHIscz17fSx0PSExLHU9ZnVuY3Rpb24oKXt9LHY9Yi5jcmVhdGVFbGVtZW50KFwiaW1nXCIpLHc9di5nZXRBdHRyaWJ1dGUseD12LnNldEF0dHJpYnV0ZSx5PXYucmVtb3ZlQXR0cmlidXRlLHo9Yi5kb2N1bWVudEVsZW1lbnQsQT17fSxCPXthbGdvcml0aG06XCJcIn0sQz1cImRhdGEtcGZzcmNcIixEPUMrXCJzZXRcIixFPW5hdmlnYXRvci51c2VyQWdlbnQsRj0vcmlkZW50Ly50ZXN0KEUpfHwvZWNrby8udGVzdChFKSYmRS5tYXRjaCgvcnZcXDooXFxkKykvKSYmUmVnRXhwLiQxPjM1LEc9XCJjdXJyZW50U3JjXCIsSD0vXFxzK1xcKz9cXGQrKGVcXGQrKT93LyxJPS8oXFwoW14pXStcXCkpP1xccyooLispLyxKPWEucGljdHVyZWZpbGxDRkcsSz1cInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt2aXNpYmlsaXR5OmhpZGRlbjtkaXNwbGF5OmJsb2NrO3BhZGRpbmc6MDtib3JkZXI6bm9uZTtmb250LXNpemU6MWVtO3dpZHRoOjFlbTtvdmVyZmxvdzpoaWRkZW47Y2xpcDpyZWN0KDBweCwgMHB4LCAwcHgsIDBweClcIixMPVwiZm9udC1zaXplOjEwMCUhaW1wb3J0YW50O1wiLE09ITAsTj17fSxPPXt9LFA9YS5kZXZpY2VQaXhlbFJhdGlvLFE9e3B4OjEsXCJpblwiOjk2fSxSPWIuY3JlYXRlRWxlbWVudChcImFcIiksUz0hMSxUPS9eWyBcXHRcXG5cXHJcXHUwMDBjXSsvLFU9L15bLCBcXHRcXG5cXHJcXHUwMDBjXSsvLFY9L15bXiBcXHRcXG5cXHJcXHUwMDBjXSsvLFc9L1ssXSskLyxYPS9eXFxkKyQvLFk9L14tPyg/OlswLTldK3xbMC05XSpcXC5bMC05XSspKD86W2VFXVsrLV0/WzAtOV0rKT8kLyxaPWZ1bmN0aW9uKGEsYixjLGQpe2EuYWRkRXZlbnRMaXN0ZW5lcj9hLmFkZEV2ZW50TGlzdGVuZXIoYixjLGR8fCExKTphLmF0dGFjaEV2ZW50JiZhLmF0dGFjaEV2ZW50KFwib25cIitiLGMpfSwkPWZ1bmN0aW9uKGEpe3ZhciBiPXt9O3JldHVybiBmdW5jdGlvbihjKXtyZXR1cm4gYyBpbiBifHwoYltjXT1hKGMpKSxiW2NdfX0sXz1mdW5jdGlvbigpe3ZhciBhPS9eKFtcXGRcXC5dKykoZW18dnd8cHgpJC8sYj1mdW5jdGlvbigpe2Zvcih2YXIgYT1hcmd1bWVudHMsYj0wLGM9YVswXTsrK2IgaW4gYTspYz1jLnJlcGxhY2UoYVtiXSxhWysrYl0pO3JldHVybiBjfSxjPSQoZnVuY3Rpb24oYSl7cmV0dXJuXCJyZXR1cm4gXCIrYigoYXx8XCJcIikudG9Mb3dlckNhc2UoKSwvXFxiYW5kXFxiL2csXCImJlwiLC8sL2csXCJ8fFwiLC9taW4tKFthLXotXFxzXSspOi9nLFwiZS4kMT49XCIsL21heC0oW2Etei1cXHNdKyk6L2csXCJlLiQxPD1cIiwvY2FsYyhbXildKykvZyxcIigkMSlcIiwvKFxcZCtbXFwuXSpbXFxkXSopKFthLXpdKykvZyxcIigkMSAqIGUuJDIpXCIsL14oPyEoZS5bYS16XXxbMC05XFwuJj18PjxcXCtcXC1cXCpcXChcXClcXC9dKSkuKi9naSxcIlwiKStcIjtcIn0pO3JldHVybiBmdW5jdGlvbihiLGQpe3ZhciBlO2lmKCEoYiBpbiBOKSlpZihOW2JdPSExLGQmJihlPWIubWF0Y2goYSkpKU5bYl09ZVsxXSpRW2VbMl1dO2Vsc2UgdHJ5e05bYl09bmV3IEZ1bmN0aW9uKFwiZVwiLGMoYikpKFEpfWNhdGNoKGYpe31yZXR1cm4gTltiXX19KCksYWE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS53PyhhLmNXaWR0aD1zLmNhbGNMaXN0TGVuZ3RoKGJ8fFwiMTAwdndcIiksYS5yZXM9YS53L2EuY1dpZHRoKTphLnJlcz1hLmQsYX0sYmE9ZnVuY3Rpb24oYSl7aWYodCl7dmFyIGMsZCxlLGY9YXx8e307aWYoZi5lbGVtZW50cyYmMT09PWYuZWxlbWVudHMubm9kZVR5cGUmJihcIklNR1wiPT09Zi5lbGVtZW50cy5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpP2YuZWxlbWVudHM9W2YuZWxlbWVudHNdOihmLmNvbnRleHQ9Zi5lbGVtZW50cyxmLmVsZW1lbnRzPW51bGwpKSxjPWYuZWxlbWVudHN8fHMucXNhKGYuY29udGV4dHx8YixmLnJlZXZhbHVhdGV8fGYucmVzZWxlY3Q/cy5zZWw6cy5zZWxTaG9ydCksZT1jLmxlbmd0aCl7Zm9yKHMuc2V0dXBSdW4oZiksUz0hMCxkPTA7ZT5kO2QrKylzLmZpbGxJbWcoY1tkXSxmKTtzLnRlYXJkb3duUnVuKGYpfX19O289YS5jb25zb2xlJiZjb25zb2xlLndhcm4/ZnVuY3Rpb24oYSl7Y29uc29sZS53YXJuKGEpfTp1LEcgaW4gdnx8KEc9XCJzcmNcIiksQVtcImltYWdlL2pwZWdcIl09ITAsQVtcImltYWdlL2dpZlwiXT0hMCxBW1wiaW1hZ2UvcG5nXCJdPSEwLEFbXCJpbWFnZS9zdmcreG1sXCJdPWIuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZShcImh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjSW1hZ2VcIixcIjEuMVwiKSxzLm5zPShcInBmXCIrKG5ldyBEYXRlKS5nZXRUaW1lKCkpLnN1YnN0cigwLDkpLHMuc3VwU3Jjc2V0PVwic3Jjc2V0XCJpbiB2LHMuc3VwU2l6ZXM9XCJzaXplc1wiaW4gdixzLnN1cFBpY3R1cmU9ISFhLkhUTUxQaWN0dXJlRWxlbWVudCxzLnN1cFNyY3NldCYmcy5zdXBQaWN0dXJlJiYhcy5zdXBTaXplcyYmIWZ1bmN0aW9uKGEpe3Yuc3Jjc2V0PVwiZGF0YTosYVwiLGEuc3JjPVwiZGF0YTosYVwiLHMuc3VwU3Jjc2V0PXYuY29tcGxldGU9PT1hLmNvbXBsZXRlLHMuc3VwUGljdHVyZT1zLnN1cFNyY3NldCYmcy5zdXBQaWN0dXJlfShiLmNyZWF0ZUVsZW1lbnQoXCJpbWdcIikpLHMuc3VwU3Jjc2V0JiYhcy5zdXBTaXplcz8hZnVuY3Rpb24oKXt2YXIgYT1cImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFnQUJBUEFBQVAvLy93QUFBQ0g1QkFBQUFBQUFMQUFBQUFBQ0FBRUFBQUlDQkFvQU93PT1cIixjPVwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFBQUFBQ0g1QkFFS0FBRUFMQUFBQUFBQkFBRUFBQUlDVEFFQU93PT1cIixkPWIuY3JlYXRlRWxlbWVudChcImltZ1wiKSxlPWZ1bmN0aW9uKCl7dmFyIGE9ZC53aWR0aDsyPT09YSYmKHMuc3VwU2l6ZXM9ITApLHE9cy5zdXBTcmNzZXQmJiFzLnN1cFNpemVzLHQ9ITAsc2V0VGltZW91dChiYSl9O2Qub25sb2FkPWUsZC5vbmVycm9yPWUsZC5zZXRBdHRyaWJ1dGUoXCJzaXplc1wiLFwiOXB4XCIpLGQuc3Jjc2V0PWMrXCIgMXcsXCIrYStcIiA5d1wiLGQuc3JjPWN9KCk6dD0hMCxzLnNlbFNob3J0PVwicGljdHVyZT5pbWcsaW1nW3NyY3NldF1cIixzLnNlbD1zLnNlbFNob3J0LHMuY2ZnPUIscy5EUFI9UHx8MSxzLnU9USxzLnR5cGVzPUEscy5zZXRTaXplPXUscy5tYWtlVXJsPSQoZnVuY3Rpb24oYSl7cmV0dXJuIFIuaHJlZj1hLFIuaHJlZn0pLHMucXNhPWZ1bmN0aW9uKGEsYil7cmV0dXJuXCJxdWVyeVNlbGVjdG9yXCJpbiBhP2EucXVlcnlTZWxlY3RvckFsbChiKTpbXX0scy5tYXRjaGVzTWVkaWE9ZnVuY3Rpb24oKXtyZXR1cm4gYS5tYXRjaE1lZGlhJiYobWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDAuMWVtKVwiKXx8e30pLm1hdGNoZXM/cy5tYXRjaGVzTWVkaWE9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fG1hdGNoTWVkaWEoYSkubWF0Y2hlc306cy5tYXRjaGVzTWVkaWE9cy5tTVEscy5tYXRjaGVzTWVkaWEuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzLm1NUT1mdW5jdGlvbihhKXtyZXR1cm4gYT9fKGEpOiEwfSxzLmNhbGNMZW5ndGg9ZnVuY3Rpb24oYSl7dmFyIGI9XyhhLCEwKXx8ITE7cmV0dXJuIDA+YiYmKGI9ITEpLGJ9LHMuc3VwcG9ydHNUeXBlPWZ1bmN0aW9uKGEpe3JldHVybiBhP0FbYV06ITB9LHMucGFyc2VTaXplPSQoZnVuY3Rpb24oYSl7dmFyIGI9KGF8fFwiXCIpLm1hdGNoKEkpO3JldHVybnttZWRpYTpiJiZiWzFdLGxlbmd0aDpiJiZiWzJdfX0pLHMucGFyc2VTZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2FuZHN8fChhLmNhbmRzPW0oYS5zcmNzZXQsYSkpLGEuY2FuZHN9LHMuZ2V0RW1WYWx1ZT1mdW5jdGlvbigpe3ZhciBhO2lmKCFwJiYoYT1iLmJvZHkpKXt2YXIgYz1iLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZD16LnN0eWxlLmNzc1RleHQsZT1hLnN0eWxlLmNzc1RleHQ7Yy5zdHlsZS5jc3NUZXh0PUssei5zdHlsZS5jc3NUZXh0PUwsYS5zdHlsZS5jc3NUZXh0PUwsYS5hcHBlbmRDaGlsZChjKSxwPWMub2Zmc2V0V2lkdGgsYS5yZW1vdmVDaGlsZChjKSxwPXBhcnNlRmxvYXQocCwxMCksei5zdHlsZS5jc3NUZXh0PWQsYS5zdHlsZS5jc3NUZXh0PWV9cmV0dXJuIHB8fDE2fSxzLmNhbGNMaXN0TGVuZ3RoPWZ1bmN0aW9uKGEpe2lmKCEoYSBpbiBPKXx8Qi51VCl7dmFyIGI9cy5jYWxjTGVuZ3RoKG4oYSkpO09bYV09Yj9iOlEud2lkdGh9cmV0dXJuIE9bYV19LHMuc2V0UmVzPWZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpe2I9cy5wYXJzZVNldChhKTtmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2Q+YztjKyspYWEoYltjXSxhLnNpemVzKX1yZXR1cm4gYn0scy5zZXRSZXMucmVzPWFhLHMuYXBwbHlTZXRDYW5kaWRhdGU9ZnVuY3Rpb24oYSxiKXtpZihhLmxlbmd0aCl7dmFyIGMsZCxlLGYsaCxrLGwsbSxuLG89YltzLm5zXSxwPXMuRFBSO2lmKGs9by5jdXJTcmN8fGJbR10sbD1vLmN1ckNhbnx8aihiLGssYVswXS5zZXQpLGwmJmwuc2V0PT09YVswXS5zZXQmJihuPUYmJiFiLmNvbXBsZXRlJiZsLnJlcy0uMT5wLG58fChsLmNhY2hlZD0hMCxsLnJlcz49cCYmKGg9bCkpKSwhaClmb3IoYS5zb3J0KGkpLGY9YS5sZW5ndGgsaD1hW2YtMV0sZD0wO2Y+ZDtkKyspaWYoYz1hW2RdLGMucmVzPj1wKXtlPWQtMSxoPWFbZV0mJihufHxrIT09cy5tYWtlVXJsKGMudXJsKSkmJmcoYVtlXS5yZXMsYy5yZXMscCxhW2VdLmNhY2hlZCk/YVtlXTpjO2JyZWFrfWgmJihtPXMubWFrZVVybChoLnVybCksby5jdXJTcmM9bSxvLmN1ckNhbj1oLG0hPT1rJiZzLnNldFNyYyhiLGgpLHMuc2V0U2l6ZShiKSl9fSxzLnNldFNyYz1mdW5jdGlvbihhLGIpe3ZhciBjO2Euc3JjPWIudXJsLFwiaW1hZ2Uvc3ZnK3htbFwiPT09Yi5zZXQudHlwZSYmKGM9YS5zdHlsZS53aWR0aCxhLnN0eWxlLndpZHRoPWEub2Zmc2V0V2lkdGgrMStcInB4XCIsYS5vZmZzZXRXaWR0aCsxJiYoYS5zdHlsZS53aWR0aD1jKSl9LHMuZ2V0U2V0PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPSExLGY9YVtzLm5zXS5zZXRzO2ZvcihiPTA7YjxmLmxlbmd0aCYmIWU7YisrKWlmKGM9ZltiXSxjLnNyY3NldCYmcy5tYXRjaGVzTWVkaWEoYy5tZWRpYSkmJihkPXMuc3VwcG9ydHNUeXBlKGMudHlwZSkpKXtcInBlbmRpbmdcIj09PWQmJihjPWQpLGU9YzticmVha31yZXR1cm4gZX0scy5wYXJzZVNldHM9ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGYsZyxoLGk9YiYmXCJQSUNUVVJFXCI9PT1iLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCksaj1hW3MubnNdOyhqLnNyYz09PWN8fGQuc3JjKSYmKGouc3JjPXcuY2FsbChhLFwic3JjXCIpLGouc3JjP3guY2FsbChhLEMsai5zcmMpOnkuY2FsbChhLEMpKSwoai5zcmNzZXQ9PT1jfHxkLnNyY3NldHx8IXMuc3VwU3Jjc2V0fHxhLnNyY3NldCkmJihlPXcuY2FsbChhLFwic3Jjc2V0XCIpLGouc3Jjc2V0PWUsaD0hMCksai5zZXRzPVtdLGkmJihqLnBpYz0hMCxsKGIsai5zZXRzKSksai5zcmNzZXQ/KGY9e3NyY3NldDpqLnNyY3NldCxzaXplczp3LmNhbGwoYSxcInNpemVzXCIpfSxqLnNldHMucHVzaChmKSxnPShxfHxqLnNyYykmJkgudGVzdChqLnNyY3NldHx8XCJcIiksZ3x8IWouc3JjfHxrKGouc3JjLGYpfHxmLmhhczF4fHwoZi5zcmNzZXQrPVwiLCBcIitqLnNyYyxmLmNhbmRzLnB1c2goe3VybDpqLnNyYyxkOjEsc2V0OmZ9KSkpOmouc3JjJiZqLnNldHMucHVzaCh7c3Jjc2V0Omouc3JjLHNpemVzOm51bGx9KSxqLmN1ckNhbj1udWxsLGouY3VyU3JjPWMsai5zdXBwb3J0ZWQ9IShpfHxmJiYhcy5zdXBTcmNzZXR8fGcmJiFzLnN1cFNpemVzKSxoJiZzLnN1cFNyY3NldCYmIWouc3VwcG9ydGVkJiYoZT8oeC5jYWxsKGEsRCxlKSxhLnNyY3NldD1cIlwiKTp5LmNhbGwoYSxEKSksai5zdXBwb3J0ZWQmJiFqLnNyY3NldCYmKCFqLnNyYyYmYS5zcmN8fGEuc3JjIT09cy5tYWtlVXJsKGouc3JjKSkmJihudWxsPT09ai5zcmM/YS5yZW1vdmVBdHRyaWJ1dGUoXCJzcmNcIik6YS5zcmM9ai5zcmMpLGoucGFyc2VkPSEwfSxzLmZpbGxJbWc9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPWIucmVzZWxlY3R8fGIucmVldmFsdWF0ZTthW3MubnNdfHwoYVtzLm5zXT17fSksYz1hW3MubnNdLChkfHxjLmV2YWxlZCE9PXIpJiYoKCFjLnBhcnNlZHx8Yi5yZWV2YWx1YXRlKSYmcy5wYXJzZVNldHMoYSxhLnBhcmVudE5vZGUsYiksYy5zdXBwb3J0ZWQ/Yy5ldmFsZWQ9cjpoKGEpKX0scy5zZXR1cFJ1bj1mdW5jdGlvbigpeyghU3x8TXx8UCE9PWEuZGV2aWNlUGl4ZWxSYXRpbykmJmYoKX0scy5zdXBQaWN0dXJlPyhiYT11LHMuZmlsbEltZz11KTohZnVuY3Rpb24oKXt2YXIgYyxkPWEuYXR0YWNoRXZlbnQ/L2QkfF5jLzovZCR8XmN8XmkvLGU9ZnVuY3Rpb24oKXt2YXIgYT1iLnJlYWR5U3RhdGV8fFwiXCI7Zj1zZXRUaW1lb3V0KGUsXCJsb2FkaW5nXCI9PT1hPzIwMDo5OTkpLGIuYm9keSYmKHMuZmlsbEltZ3MoKSxjPWN8fGQudGVzdChhKSxjJiZjbGVhclRpbWVvdXQoZikpfSxmPXNldFRpbWVvdXQoZSxiLmJvZHk/OTo5OSksZz1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1mdW5jdGlvbigpe3ZhciBmPW5ldyBEYXRlLWQ7Yj5mP2M9c2V0VGltZW91dChlLGItZik6KGM9bnVsbCxhKCkpfTtyZXR1cm4gZnVuY3Rpb24oKXtkPW5ldyBEYXRlLGN8fChjPXNldFRpbWVvdXQoZSxiKSl9fSxoPXouY2xpZW50SGVpZ2h0LGk9ZnVuY3Rpb24oKXtNPU1hdGgubWF4KGEuaW5uZXJXaWR0aHx8MCx6LmNsaWVudFdpZHRoKSE9PVEud2lkdGh8fHouY2xpZW50SGVpZ2h0IT09aCxoPXouY2xpZW50SGVpZ2h0LE0mJnMuZmlsbEltZ3MoKX07WihhLFwicmVzaXplXCIsZyhpLDk5KSksWihiLFwicmVhZHlzdGF0ZWNoYW5nZVwiLGUpfSgpLHMucGljdHVyZWZpbGw9YmEscy5maWxsSW1ncz1iYSxzLnRlYXJkb3duUnVuPXUsYmEuXz1zLGEucGljdHVyZWZpbGxDRkc9e3BmOnMscHVzaDpmdW5jdGlvbihhKXt2YXIgYj1hLnNoaWZ0KCk7XCJmdW5jdGlvblwiPT10eXBlb2Ygc1tiXT9zW2JdLmFwcGx5KHMsYSk6KEJbYl09YVswXSxTJiZzLmZpbGxJbWdzKHtyZXNlbGVjdDohMH0pKX19O2Zvcig7SiYmSi5sZW5ndGg7KWEucGljdHVyZWZpbGxDRkcucHVzaChKLnNoaWZ0KCkpO2EucGljdHVyZWZpbGw9YmEsXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWJhOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKFwicGljdHVyZWZpbGxcIixmdW5jdGlvbigpe3JldHVybiBiYX0pLHMuc3VwUGljdHVyZXx8KEFbXCJpbWFnZS93ZWJwXCJdPWUoXCJpbWFnZS93ZWJwXCIsXCJkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFVrbEdSa29BQUFCWFJVSlFWbEE0V0FvQUFBQVFBQUFBQUFBQUFBQUFRVXhRU0F3QUFBQUJCeEFSL1E5RVJQOERBQUJXVURnZ0dBQUFBREFCQUowQktnRUFBUUFEQURRbHBBQURjQUQrKy8xUUFBPT1cIikpfSh3aW5kb3csZG9jdW1lbnQpOyIsIi8qIGVzbGludCBtYXgtbGVuOiBbXCJlcnJvclwiLCB7IFwiY29kZVwiOiAxMDAgfV0qL1xuLyogZXNsaW50IG5vLXVudXNlZC12YXJzOiBbXCJlcnJvclwiLCB7IFwidmFyc1wiOiBcImxvY2FsXCIgfV0qL1xuXG5cbmxldCByZXN0YXVyYW50O1xubGV0IG1hcDtcblxuLyoqXG4gKiBJbml0aWFsaXplIEdvb2dsZSBtYXAsIGNhbGxlZCBmcm9tIEhUTUwuXG4gKi9cbndpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xuICBmZXRjaFJlc3RhdXJhbnRGcm9tVVJMKChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xuICAgICAgICB6b29tOiAxNixcbiAgICAgICAgY2VudGVyOiByZXN0YXVyYW50LmxhdGxuZyxcbiAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJykuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2FwcGxpY2F0aW9uJyk7XG5cbiAgICAgIGZpbGxCcmVhZGNydW1iKCk7XG5cbiAgICAgIC8qXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJykuc2V0QXR0cmlidXRlKCdyb2xlJywnYXBwbGljYXRpb24nKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywnNCcpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCd0cnVlJyk7XG4gICAgICAqL1xuICAgICAgREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChzZWxmLnJlc3RhdXJhbnQsIHNlbGYubWFwKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLyoqXG4gKiBHZXQgY3VycmVudCByZXN0YXVyYW50IGZyb20gcGFnZSBVUkwuXG4gKi9cblxuZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCA9IChjYWxsYmFjaykgPT4ge1xuICBpZiAoc2VsZi5yZXN0YXVyYW50KSB7IC8vIHJlc3RhdXJhbnQgYWxyZWFkeSBmZXRjaGVkIVxuICAgIGNhbGxiYWNrKG51bGwsIHNlbGYucmVzdGF1cmFudCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGlkID0gZ2V0UGFyYW1ldGVyQnlOYW1lKCdpZCcpO1xuICBpZiAoIWlkKSB7IC8vIG5vIGlkIGZvdW5kIGluIFVSTFxuICAgIGVycm9yID0gJ05vIHJlc3RhdXJhbnQgaWQgaW4gVVJMJztcbiAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gIH0gZWxzZSB7XG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlJZChpZCwgKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgICBzZWxmLnJlc3RhdXJhbnQgPSByZXN0YXVyYW50O1xuICAgICAgaWYgKCFyZXN0YXVyYW50KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBmaWxsUmVzdGF1cmFudEhUTUwoKTtcbiAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3RhdXJhbnQpO1xuICAgIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZVxuICovXG5cbmZpbGxSZXN0YXVyYW50SFRNTCA9IChyZXN0YXVyYW50ID0gc2VsZi5yZXN0YXVyYW50KSA9PiB7XG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1uYW1lJyk7XG4gIG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xuXG4gIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1hZGRyZXNzJyk7XG4gIGFkZHJlc3MuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5hZGRyZXNzO1xuXG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtaW1nJyk7XG4gIGltYWdlLmNsYXNzTmFtZSA9ICdyZXN0YXVyYW50LWltZyc7XG4gIC8qIHVuaXF1ZSBhbHQtYXJpYWxhYmVsICovXG4gIGltYWdlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIG5hbWUuaW5uZXJIVE1MKycgcmVzdGF1cmFudCcpO1xuICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIG5hbWUuaW5uZXJIVE1MKycgcmVzdGF1cmFudCcpO1xuXG4gIGltYWdlLnNyYyA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcblxuICBjb25zdCBjdWlzaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtY3Vpc2luZScpO1xuICBjdWlzaW5lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuY3Vpc2luZV90eXBlO1xuXG4gIC8vIGZpbGwgb3BlcmF0aW5nIGhvdXJzXG4gIGlmIChyZXN0YXVyYW50Lm9wZXJhdGluZ19ob3Vycykge1xuICAgIGZpbGxSZXN0YXVyYW50SG91cnNIVE1MKCk7XG4gIH1cbiAgLy8gZmlsbCByZXZpZXdzXG4gIGZpbGxSZXZpZXdzSFRNTCgpO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBvcGVyYXRpbmcgaG91cnMgSFRNTCB0YWJsZSBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlLlxuICovXG5cbmZpbGxSZXN0YXVyYW50SG91cnNIVE1MID0gKG9wZXJhdGluZ0hvdXJzID0gc2VsZi5yZXN0YXVyYW50Lm9wZXJhdGluZ19ob3VycykgPT4ge1xuICBjb25zdCBob3VycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWhvdXJzJyk7XG4gIGZvciAobGV0IGtleSBpbiBvcGVyYXRpbmdIb3Vycykge1xuICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICBjb25zdCBkYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgIGRheS5pbm5lckhUTUwgPSBrZXk7XG4gICAgZGF5LnN0eWxlLmNvbG9yPScjNTI1MjUyJztcbiAgICByb3cuYXBwZW5kQ2hpbGQoZGF5KTtcblxuICAgIGNvbnN0IHRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgIHRpbWUuaW5uZXJIVE1MID0gb3BlcmF0aW5nSG91cnNba2V5XTtcbiAgICB0aW1lLnN0eWxlLmNvbG9yPScjNTI1MjUyJztcblxuICAgIHJvdy5hcHBlbmRDaGlsZCh0aW1lKTtcblxuICAgIGhvdXJzLmFwcGVuZENoaWxkKHJvdyk7XG4gIH1cbn07XG5cbi8qKlxuICogQ3JlYXRlIGFsbCByZXZpZXdzIEhUTUwgYW5kIGFkZCB0aGVtIHRvIHRoZSB3ZWJwYWdlLlxuICovXG5cbmZpbGxSZXZpZXdzSFRNTCA9IChyZXZpZXdzID0gc2VsZi5yZXN0YXVyYW50LnJldmlld3MpID0+IHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtY29udGFpbmVyJyk7XG4gIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcbiAgdGl0bGUuaW5uZXJIVE1MID0gJ1Jldmlld3MnO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gIGlmICghcmV2aWV3cykge1xuICAgIGNvbnN0IG5vUmV2aWV3cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBub1Jldmlld3MuaW5uZXJIVE1MID0gJ05vIHJldmlld3MgeWV0ISc7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG5vUmV2aWV3cyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtbGlzdCcpO1xuICByZXZpZXdzLmZvckVhY2goKHJldmlldykgPT4ge1xuICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZVJldmlld0hUTUwocmV2aWV3KSk7XG4gIH0pO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodWwpO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgcmV2aWV3IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cbiAqL1xuXG5jcmVhdGVSZXZpZXdIVE1MID0gKHJldmlldykgPT4ge1xuICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICBjb25zdCByZXZpZXdIZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByZXZpZXdIZWFkZXIuY2xhc3NOYW1lID0gJ3Jldmlldy1oZWFkZXInO1xuICAgIGxpLmFwcGVuZENoaWxkKHJldmlld0hlYWRlcik7XG5cbiAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDQnKTtcbiAgICBuYW1lLmlubmVySFRNTCA9IHJldmlldy5uYW1lO1xuICAgIG5hbWUuY2xhc3NOYW1lID0gJ3Jldmlldy1hdXRob3InO1xuICAgIG5hbWUuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2hlYWRlcicpOyAvL2FkZGVkIEFSSUEgcm9sZSBmb3IgYWNjZXNzaWJpbHR5XG4gICAgbmFtZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTsgLy9hZGRlZCB0YWJpbmRleCBmb3IgYWNjZXNzaWJpbHR5XG4gICAgcmV2aWV3SGVhZGVyLmFwcGVuZENoaWxkKG5hbWUpO1xuXG4gICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBkYXRlLmlubmVySFRNTCA9IHJldmlldy5kYXRlO1xuICAgIGRhdGUuY2xhc3NOYW1lID0gJ3Jldmlldy1kYXRlJztcbiAgICBkYXRlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpOyAvL2FkZGVkIHRhYmluZGV4IGZvciBhY2Nlc3NpYmlsdHlcbiAgICByZXZpZXdIZWFkZXIuYXBwZW5kQ2hpbGQoZGF0ZSk7XG5cbiAgICBjb25zdCByZXZpZXdDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcmV2aWV3Q29udGVudC5jbGFzc05hbWUgPSAncmV2aWV3LWNvbnRlbnQnO1xuICAgIGxpLmFwcGVuZENoaWxkKHJldmlld0NvbnRlbnQpO1xuXG4gICAgY29uc3QgcmF0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcmF0aW5nLmlubmVySFRNTCA9IGBSYXRpbmc6ICR7cmV2aWV3LnJhdGluZ31gO1xuICAgIHJhdGluZy5jbGFzc05hbWUgPSAncmF0aW5nJztcbiAgICByYXRpbmcuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7IC8vYWRkZWQgdGFiaW5kZXggZm9yIGFjY2Vzc2liaWx0eVxuICAgIHJldmlld0NvbnRlbnQuYXBwZW5kQ2hpbGQocmF0aW5nKTtcblxuICAgIGNvbnN0IGNvbW1lbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIGNvbW1lbnRzLmlubmVySFRNTCA9IHJldmlldy5jb21tZW50cztcbiAgICBjb21tZW50cy5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTsgLy9hZGRlZCB0YWJpbmRleCBmb3IgYWNjZXNzaWJpbHR5XG4gICAgcmV2aWV3Q29udGVudC5hcHBlbmRDaGlsZChjb21tZW50cyk7XG5cbiAgICByZXR1cm4gbGk7XG4gIH1cblxuXG4vKipcbiAqIEFkZCByZXN0YXVyYW50IG5hbWUgdG8gdGhlIGJyZWFkY3J1bWIgbmF2aWdhdGlvbiBtZW51XG4gKi9cblxuZmlsbEJyZWFkY3J1bWIgPSAocmVzdGF1cmFudD1zZWxmLnJlc3RhdXJhbnQpID0+IHtcbiAgY29uc3QgYnJlYWRjcnVtYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhZGNydW1iJyk7XG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgbGkuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xuICBicmVhZGNydW1iLmFwcGVuZENoaWxkKGxpKTtcbn07XG5cbi8qKlxuICogR2V0IGEgcGFyYW1ldGVyIGJ5IG5hbWUgZnJvbSBwYWdlIFVSTC5cbiAqL1xuXG5nZXRQYXJhbWV0ZXJCeU5hbWUgPSAobmFtZSwgdXJsKSA9PiB7XG4gIGlmICghdXJsKSB7XG51cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbn1cbiAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW1xcXV0vZywgJ1xcXFwkJicpO1xuICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFs/Jl0ke25hbWV9KD0oW14mI10qKXwmfCN8JClgKTtcbiAgY29uc3QgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcbiAgaWYgKCFyZXN1bHRzKSB7XG5yZXR1cm4gbnVsbDtcbn1cbiAgaWYgKCFyZXN1bHRzWzJdKSB7XG5yZXR1cm4gJyc7XG59XG4gIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgJyAnKSk7XG59O1xuXG5cbi8qXG5TY3JlZW4gUmVhZGVyIFNFVFRJTkdTIGZvciB0aGUgcmV2aWV3c1xuKi9cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgR29vZ2xlIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKlxuICovXG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIG5hdGl2ZUFkZEFsbCA9IENhY2hlLnByb3RvdHlwZS5hZGRBbGw7XG4gIHZhciB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC8oRmlyZWZveHxDaHJvbWUpXFwvKFxcZCtcXC4pLyk7XG5cbiAgLy8gSGFzIG5pY2UgYmVoYXZpb3Igb2YgYHZhcmAgd2hpY2ggZXZlcnlvbmUgaGF0ZXNcbiAgaWYgKHVzZXJBZ2VudCkge1xuICAgIHZhciBhZ2VudCA9IHVzZXJBZ2VudFsxXTtcbiAgICB2YXIgdmVyc2lvbiA9IHBhcnNlSW50KHVzZXJBZ2VudFsyXSk7XG4gIH1cblxuICBpZiAoXG4gICAgbmF0aXZlQWRkQWxsICYmICghdXNlckFnZW50IHx8XG4gICAgICAoYWdlbnQgPT09ICdGaXJlZm94JyAmJiB2ZXJzaW9uID49IDQ2KSB8fFxuICAgICAgKGFnZW50ID09PSAnQ2hyb21lJyAgJiYgdmVyc2lvbiA+PSA1MClcbiAgICApXG4gICkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIENhY2hlLnByb3RvdHlwZS5hZGRBbGwgPSBmdW5jdGlvbiBhZGRBbGwocmVxdWVzdHMpIHtcbiAgICB2YXIgY2FjaGUgPSB0aGlzO1xuXG4gICAgLy8gU2luY2UgRE9NRXhjZXB0aW9ucyBhcmUgbm90IGNvbnN0cnVjdGFibGU6XG4gICAgZnVuY3Rpb24gTmV0d29ya0Vycm9yKG1lc3NhZ2UpIHtcbiAgICAgIHRoaXMubmFtZSA9ICdOZXR3b3JrRXJyb3InO1xuICAgICAgdGhpcy5jb2RlID0gMTk7XG4gICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIH1cblxuICAgIE5ldHdvcmtFcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMSkgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuXG4gICAgICAvLyBTaW11bGF0ZSBzZXF1ZW5jZTwoUmVxdWVzdCBvciBVU1ZTdHJpbmcpPiBiaW5kaW5nOlxuICAgICAgdmFyIHNlcXVlbmNlID0gW107XG5cbiAgICAgIHJlcXVlc3RzID0gcmVxdWVzdHMubWFwKGZ1bmN0aW9uKHJlcXVlc3QpIHtcbiAgICAgICAgaWYgKHJlcXVlc3QgaW5zdGFuY2VvZiBSZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlcXVlc3Q7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFN0cmluZyhyZXF1ZXN0KTsgLy8gbWF5IHRocm93IFR5cGVFcnJvclxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgICAgICByZXF1ZXN0cy5tYXAoZnVuY3Rpb24ocmVxdWVzdCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgcmVxdWVzdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJlcXVlc3QgPSBuZXcgUmVxdWVzdChyZXF1ZXN0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgc2NoZW1lID0gbmV3IFVSTChyZXF1ZXN0LnVybCkucHJvdG9jb2w7XG5cbiAgICAgICAgICBpZiAoc2NoZW1lICE9PSAnaHR0cDonICYmIHNjaGVtZSAhPT0gJ2h0dHBzOicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoXCJJbnZhbGlkIHNjaGVtZVwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gZmV0Y2gocmVxdWVzdC5jbG9uZSgpKTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZXMpIHtcbiAgICAgIC8vIElmIHNvbWUgb2YgdGhlIHJlc3BvbnNlcyBoYXMgbm90IE9LLWVpc2ggc3RhdHVzLFxuICAgICAgLy8gdGhlbiB3aG9sZSBvcGVyYXRpb24gc2hvdWxkIHJlamVjdFxuICAgICAgaWYgKHJlc3BvbnNlcy5zb21lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHJldHVybiAhcmVzcG9uc2Uub2s7XG4gICAgICB9KSkge1xuICAgICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKCdJbmNvcnJlY3QgcmVzcG9uc2Ugc3RhdHVzJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRPRE86IGNoZWNrIHRoYXQgcmVxdWVzdHMgZG9uJ3Qgb3ZlcndyaXRlIG9uZSBhbm90aGVyXG4gICAgICAvLyAoZG9uJ3QgdGhpbmsgdGhpcyBpcyBwb3NzaWJsZSB0byBwb2x5ZmlsbCBkdWUgdG8gb3BhcXVlIHJlc3BvbnNlcylcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgICAgcmVzcG9uc2VzLm1hcChmdW5jdGlvbihyZXNwb25zZSwgaSkge1xuICAgICAgICAgIHJldHVybiBjYWNoZS5wdXQocmVxdWVzdHNbaV0sIHJlc3BvbnNlKTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSk7XG4gIH07XG5cbiAgQ2FjaGUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZChyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkQWxsKFtyZXF1ZXN0XSk7XG4gIH07XG59KCkpOyJdfQ==
